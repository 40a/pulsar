<!DOCTYPE html>



<html>
<head>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <title>Object Data Mapper &mdash; pulsar 0.8.2-beta.1 documentation</title>
    
    <link rel="stylesheet" href="../../static/pulsar.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8.2-beta.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="shortcut icon" href="../../static/favicon.ico"/>
    <link rel="top" title="pulsar 0.8.2-beta.1 documentation" href="../../index.html" />
    <link rel="up" title="Data Stores" href="index.html" />
    <link rel="next" title="Available Clients" href="stores.html" />
    <link rel="prev" title="Datastore Clients" href="clients.html" /> 
</head>
 <body>



    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="stores.html" title="Available Clients"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="clients.html" title="Datastore Clients"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">pulsar 0.8.2-beta.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Data Stores</a> &raquo;</li> 
      </ul>
    </div>
<div class="deck">
<div class="header">
    
        <p class="developmentversion">
        Documentation for pulsar's DEVELOPMENT version. Get the
        <a href="http://pythonhosted.org/pulsar/apps/data/odm.html">release docs here</a>.
        </p>
    
</div>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pulsar.apps.data.odm">
<span id="object-data-mapper"></span><span id="odm"></span><h1>Object Data Mapper<a class="headerlink" href="#module-pulsar.apps.data.odm" title="Permalink to this headline">¶</a></h1>
<p>Pulsar ships with an ultrafast object data mapper (ODM) for managing
and retrieving data asynchronously.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Built on top of pulsar <a class="reference internal" href="clients.html#data-stores"><em>data store client api</em></a></li>
<li>Presents a method of associating user-defined Python classes with data-stores
<strong>collections</strong>/<strong>tables</strong></li>
<li>An instance of a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> is mapped into an <strong>item</strong>/<strong>row</strong>
in its corresponding collection/table</li>
<li>It allows the use of <a class="reference internal" href="#odm-multiple-backends"><em>different stores for different models</em></a></li>
<li>Straightforward CRUD operations</li>
<li>Design to be fast, lightweight and non-intrusive</li>
</ul>
</div>
<div class="section" id="getting-started">
<span id="odm-intro"></span><h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The first step is to create the two <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> we are going to use
throughout this tutorial:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="kn">from</span> <span class="nn">pulsar.apps.data</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">is_active</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">BoolField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Session</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">expiry</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">JSONField</span><span class="p">()</span>
</pre></div>
</div>
<p>The first model contains some basic information for a user, while the second
represents a session (think of it as a web session for example).</p>
</div>
<div class="section" id="mapper-managers">
<h2>Mapper &amp; Managers<a class="headerlink" href="#mapper-managers" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>, such as the <tt class="docutils literal"><span class="pre">User</span></tt> class defined above, has no information
regarding database, it is purely a dictionary with additional information
about fields.</p>
<div class="section" id="registration">
<span id="odm-registration"></span><h3>Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h3>
<p>Registration consists in associating a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> to a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>
via a <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>. In this way one can have a group of models associated
with their managers pointing at their, possibly different, back-end servers.
Registration is straightforward and it is achieved by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.data</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="n">models</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Mapper</span><span class="p">(</span><span class="s">&#39;redis://127.0.0.1:6379/7&#39;</span><span class="p">)</span>

<span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">Session</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="clients.html#connection-string"><em>connection string</em></a> passed as first argument when
initialising a <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>, is the default <a class="reference internal" href="clients.html#data-stores"><em>data store</em></a>
of that <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.
It is possible to register models to a different data-stores by passing
a <tt class="docutils literal"><span class="pre">store</span></tt> parameter to the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.register" title="pulsar.apps.data.odm.mapper.Mapper.register"><tt class="xref py py-meth docutils literal"><span class="pre">Mapper.register()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="s">&#39;redis://127.0.0.1:6379/8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-managers">
<h3>Accessing managers<a class="headerlink" href="#accessing-managers" title="Permalink to this headline">¶</a></h3>
<p>Given a <tt class="docutils literal"><span class="pre">models</span></tt> <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> there are two ways one can access a
model <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> to perform database queries.</p>
<ul id="mapper-dict">
<li><p class="first"><strong>Dictionary interface</strong> is the most straightforward and intuitive way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a Query for Instrument</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">User</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="c">#</span>
<span class="c"># Create a new Instrument and save it to the backend server</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">User</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<ul id="mapper-dotted">
<li><p class="first"><strong>Dotted notation</strong> is an alternative and more pythonic way of achieving the
same manager via an attribute of the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>, the attribute
name is given by the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> metaclass <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.name" title="pulsar.apps.data.odm.model.ModelMeta.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a>.
It is, by default, the class name of the model in lower case:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>The <a class="reference internal" href="#mapper-dotted"><em>dotted notation</em></a> is less verbose than the
<a class="reference internal" href="#mapper-dict"><em>dictionary notation</em></a> and, importantly, it allows to
access models and their managers without the need to directly
import the model definition. All you need is the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.
In other words it makes your application
less dependent on the actual implementation of a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</div>
<div class="section" id="create-an-instance">
<h3>Create an instance<a class="headerlink" href="#create-an-instance" title="Permalink to this headline">¶</a></h3>
<p>When creating a new instance of model the callable method its registered
<a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> should be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pippo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">user</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&#39;pippo&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">&#39;pippo@bla.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">pippo</span></tt> is a instance not yet persistent in the data store.</p>
</div>
<div class="section" id="multiple-backends">
<span id="odm-multiple-backends"></span><h3>Multiple backends<a class="headerlink" href="#multiple-backends" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> allows to use your models in several different back-ends
without changing the way you query your data. In addition it allows to
specify different back-ends for <tt class="docutils literal"><span class="pre">write</span></tt> operations and for <tt class="docutils literal"><span class="pre">read</span></tt> only
operations.</p>
<p>To specify a different back-end for read operations one registers a model in
the following way:</p>
<div class="highlight-python"><pre>models.register(User,
                store=&#x27;redis://127.0.0.1:6379/8,
                read_store=&#x27;redis://127.0.0.1:6380/1&#x27;)</pre>
</div>
</div>
<div class="section" id="custom-managers">
<span id="custom-manager"></span><h3>Custom managers<a class="headerlink" href="#custom-managers" title="Permalink to this headline">¶</a></h3>
<p>When a <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> registers a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>, it creates a new
instance of a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> and add it to the dictionary of managers.
It is possible to supply a custom manager class by specifying the
<tt class="docutils literal"><span class="pre">manager_class</span></tt> attribute on the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.data</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">CustomManager</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">special_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="n">manager_class</span> <span class="o">=</span> <span class="n">CustomManager</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="querying-data">
<h2>Querying Data<a class="headerlink" href="#querying-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="full-text-search">
<span id="odm-search"></span><h3>Full text search<a class="headerlink" href="#full-text-search" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="relationships">
<h2>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h2>
<p>There are two <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which represent relationships between
<a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
<div class="section" id="one-to-many">
<span id="id1"></span><h3>One-to-many<a class="headerlink" href="#one-to-many" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#odm-intro"><em>Session model</em></a> in our example,
contains one <a class="reference internal" href="#pulsar.apps.data.odm.fields.ForeignKey" title="pulsar.apps.data.odm.fields.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> field which represents a relationship
between the <tt class="docutils literal"><span class="pre">Session</span></tt> model and
the <tt class="docutils literal"><span class="pre">User</span></tt> model.</p>
<p>In the context of relational databases a
<a class="reference external" href="http://en.wikipedia.org/wiki/Foreign_key">foreign key</a> is
a referential constraint between two tables.
The same definition applies to pulsar odm. The field store the <tt class="docutils literal"><span class="pre">id</span></tt> of a
related <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> instance.</p>
<p><strong>Key Properties</strong></p>
<ul>
<li><p class="first">Behind the scenes, stdnet appends <tt class="docutils literal"><span class="pre">_id</span></tt> to the field name to create its
field name in the back-end data-server. In other words, the
<a class="reference internal" href="#odm-intro"><em>Session model</em></a> is mapped into a data-store
object with the following entries:</p>
<div class="highlight-python"><pre>{&#x27;id&#x27;: ...,
 &#x27;user_id&#x27;: ...,
 &#x27;expiry&#x27;: ...
 &#x27;data&#x27;: ...}</pre>
</div>
</li>
<li><p class="first">The attribute of a <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> can be used to access the related
object. Using the <em class="xref std std-ref">router we created during registration</em>
we get a position instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">p</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">instrument</span>    <span class="c"># an instance of Instrument</span>
</pre></div>
</div>
<p>The second statement is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">router</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">instrument_id</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The loading of the related object is done, <strong>once only</strong>, the first time
the attribute is accessed. This means, the first time you access a related
field on a model instance, there will be a roundtrip to the backend server.</p>
</div>
<p>Behind the scenes, this functionality is implemented by Python
<a href="#id3"><span class="problematic" id="id4">descriptors_</span></a>. This shouldn&#8217;t really matter to you, but we point it out here
for the curious.</p>
</li>
<li><p class="first">Depending on your application, sometimes it makes a lot of sense to use the
<em class="xref std std-ref">load_related query method</em> to boost
performance when accessing many related fields.</p>
</li>
<li><p class="first">When the object referenced by a <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> is deleted, stdnet also
deletes the object containing the <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> unless the
<tt class="xref py py-class docutils literal"><span class="pre">Field.required</span></tt> attribute of the <tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt> field is set
to <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="many-to-many">
<span id="id2"></span><h3>Many-to-many<a class="headerlink" href="#many-to-many" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt> can be used to create relationships between
multiple elements of two models. It requires a positional argument, the class
to which the model is related.</p>
<p>Behind the scenes, stdnet creates an intermediary model to represent
the many-to-many relationship. We refer to this as the <tt class="docutils literal"><span class="pre">through</span> <span class="pre">model</span></tt>.</p>
<p>Let&#8217;s consider the following example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">groups</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;users&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both the <tt class="docutils literal"><span class="pre">User</span></tt> class and instances of if have the <tt class="docutils literal"><span class="pre">groups</span></tt> attribute which
is an instance of A many-to-may <tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.related.One2ManyRelatedManager</span></tt>.
Accessing the manager via the model class or an instance has different outcomes.</p>
</div>
<div class="section" id="the-through-model">
<span id="through-model"></span><h3>The through model<a class="headerlink" href="#the-through-model" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="custom-through-model">
<h3>Custom through model<a class="headerlink" href="#custom-through-model" title="Permalink to this headline">¶</a></h3>
<p>In most cases, the standard through model implemented by stdnet is
all you need. However, sometimes you may need to associate data with the
relationship between two models.</p>
<p>For these situations, stdnet allows you to specify the model that will be used
to govern the many-to-many relationship and pass it to the
<tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt> constructor via the <tt class="docutils literal"><span class="pre">through</span></tt> argument.
Consider this simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stdnet</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">CompositeElement</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">FloatField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Composite</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">()</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Element</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="n">CompositeElement</span><span class="p">,</span>
                                   <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;composites&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-pulsar.apps.data.odm.model">
<span id="api"></span><h2>API<a class="headerlink" href="#module-pulsar.apps.data.odm.model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="model">
<h3>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.model.Model">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.model.</tt><tt class="descname">Model</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>A model is a python <tt class="docutils literal"><span class="pre">dict</span></tt> which represents and item/row
in a data-store collection/table.</p>
<p>Fields values can be accessed via the dictionary interface:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">model</span><span class="p">[</span><span class="s">&#39;field1&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>or the dotted interface:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">model</span><span class="o">.</span><span class="n">field1</span>
</pre></div>
</div>
<p>which is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">model</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;field1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.Model._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.Model._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Class attribute which represents the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta" title="pulsar.apps.data.odm.model.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a>
for this model.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.Model.set">
<tt class="descname">set</tt><big>(</big><em>field</em>, <em>value</em>, <em>modify=True</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <tt class="docutils literal"><span class="pre">value</span></tt> at <tt class="docutils literal"><span class="pre">field</span></tt></p>
<p>If <tt class="docutils literal"><span class="pre">modify</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>, this method is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">model</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.Model.get_raw">
<tt class="descname">get_raw</tt><big>(</big><em>field</em>, <em>default=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model.get_raw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model.get_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the raw value at <tt class="docutils literal"><span class="pre">field</span></tt></p>
<p>This function does not apply field conversion.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.Model.to_json">
<tt class="descname">to_json</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model.to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a JSON serialisable dictionary representation.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.Model.save">
<tt class="descname">save</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit changes to backend data store.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.Model.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#Model.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.Model.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete this model from backend data store</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-meta">
<h3>Model Meta<a class="headerlink" href="#model-meta" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.model.ModelMeta">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.model.</tt><tt class="descname">ModelMeta</tt><big>(</big><em>model</em>, <em>fields</em>, <em>app_label=None</em>, <em>table_name=None</em>, <em>name=None</em>, <em>register=True</em>, <em>pkname=None</em>, <em>abstract=False</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#ModelMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for storing meta data for a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class.
To override default behaviour you can specify the <tt class="docutils literal"><span class="pre">Meta</span></tt> class
as an inner class of <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.data</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">FloatField</span><span class="p">()</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;custom&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>register</strong> &#8211; if <tt class="docutils literal"><span class="pre">True</span></tt> (default), this <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta" title="pulsar.apps.data.odm.model.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a> is
registered in the global models hashtable.</li>
<li><strong>abstract</strong> &#8211; Check the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.abstract" title="pulsar.apps.data.odm.model.ModelMeta.abstract"><tt class="xref py py-attr docutils literal"><span class="pre">abstract</span></tt></a> attribute.</li>
<li><strong>app_label</strong> &#8211; Check the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.app_label" title="pulsar.apps.data.odm.model.ModelMeta.app_label"><tt class="xref py py-attr docutils literal"><span class="pre">app_label</span></tt></a> attribute.</li>
<li><strong>name</strong> &#8211; Check the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.name" title="pulsar.apps.data.odm.model.ModelMeta.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> attribute.</li>
<li><strong>table_name</strong> &#8211; Check the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.table_name" title="pulsar.apps.data.odm.model.ModelMeta.table_name"><tt class="xref py py-attr docutils literal"><span class="pre">table_name</span></tt></a> attribute</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This is the list of attributes and methods available. All attributes,
but the ones mentioned above, are initialised by the object relational
mapper.</p>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.abstract">
<tt class="descname">abstract</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.abstract" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt>, This is an abstract Meta class.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.model">
<tt class="descname">model</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.model" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> for which this instance is the database metadata
container.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Usually it is the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class name in lower-case, but it
can be customised.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.app_label">
<tt class="descname">app_label</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.app_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Unless specified it is the name of the directory or file
(if at top level) containing the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> definition.
It can be customised.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.table_name">
<tt class="descname">table_name</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.table_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The table_name which is by default given by <tt class="docutils literal"><span class="pre">&lt;app_label&gt;_&lt;name&gt;</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.dfields">
<tt class="descname">dfields</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.dfields" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary of all <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> in <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.model" title="pulsar.apps.data.odm.model.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a></p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.scalarfields">
<tt class="descname">scalarfields</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.scalarfields" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordered list of all <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> which are not
<tt class="xref py py-class docutils literal"><span class="pre">StructureField</span></tt>.
The order is the same as in the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> definition.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.indexes">
<tt class="descname">indexes</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which are indexes (<a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.index" title="pulsar.apps.data.odm.fields.Field.index"><tt class="xref py py-attr docutils literal"><span class="pre">index</span></tt></a>
attribute set to <tt class="docutils literal"><span class="pre">True</span></tt>).</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.pk">
<tt class="descname">pk</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.pk" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> representing the primary key.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.related">
<tt class="descname">related</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.related" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of <tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt> for the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.model" title="pulsar.apps.data.odm.model.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>.
It is created at runtime by the object data mapper.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.model.ModelMeta.manytomany">
<tt class="descname">manytomany</tt><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.manytomany" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt> names for the <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta.model" title="pulsar.apps.data.odm.model.ModelMeta.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. This
information is useful during registration.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.ModelMeta.pkname">
<tt class="descname">pkname</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#ModelMeta.pkname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.pkname" title="Permalink to this definition">¶</a></dt>
<dd><p>Primary key name. A shortcut for <tt class="docutils literal"><span class="pre">self.pk.name</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.ModelMeta.pk_to_python">
<tt class="descname">pk_to_python</tt><big>(</big><em>value</em>, <em>backend</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#ModelMeta.pk_to_python"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.pk_to_python" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the primary key <tt class="docutils literal"><span class="pre">value</span></tt> to a valid python representation.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.model.ModelMeta.store_data">
<tt class="descname">store_data</tt><big>(</big><em>instance</em>, <em>store</em>, <em>action</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/model.html#ModelMeta.store_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.model.ModelMeta.store_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of <tt class="docutils literal"><span class="pre">field,</span> <span class="pre">value</span></tt> pair for the data <tt class="docutils literal"><span class="pre">store</span></tt>.</p>
<p>Perform validation for <tt class="docutils literal"><span class="pre">instance</span></tt> and can raise <a class="reference internal" href="#pulsar.apps.data.odm.fields.FieldError" title="pulsar.apps.data.odm.fields.FieldError"><tt class="xref py py-class docutils literal"><span class="pre">FieldError</span></tt></a>
if invalid values are stored in <tt class="docutils literal"><span class="pre">instance</span></tt>.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.manager"></span></div>
<div class="section" id="manager">
<h3>Manager<a class="headerlink" href="#manager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.manager.Manager">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.manager.</tt><tt class="descname">Manager</tt><big>(</big><em>model</em>, <em>store=None</em>, <em>read_store=None</em>, <em>mapper=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Used by the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> to link a data <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> collection
with a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.data</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">()</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>

<span class="n">models</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Mapper</span><span class="p">()</span>
<span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>

<span class="n">manager</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]</span>
</pre></div>
</div>
<p>A <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> can specify a <a class="reference internal" href="#custom-manager"><em>custom manager</em></a> by
creating a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> subclass with additional methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelManager</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">special_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>At this point we need to tell the model about the custom manager, and we do
so by setting the <tt class="docutils literal"><span class="pre">manager_class</span></tt> class attribute in the
<a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="n">manager_class</span> <span class="o">=</span> <span class="n">MyModelManager</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.manager.Manager._model">
<tt class="descname">_model</tt><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager._model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> associated with this manager</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.manager.Manager._store">
<tt class="descname">_store</tt><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager._store" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> associated with this manager</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.manager.Manager._read_store">
<tt class="descname">_read_store</tt><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager._read_store" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> associated with this manager for
read-only operations</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.manager.Manager._mapper">
<tt class="descname">_mapper</tt><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager._mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> where this <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> is registered</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.manager.Manager.query_class">
<tt class="descname">query_class</tt><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.query_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.create_table">
<tt class="descname">create_table</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.create_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table/collection for the <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.drop_table">
<tt class="descname">drop_table</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.drop_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.drop_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop the table/collection for the <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.query">
<tt class="descname">query</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.get">
<tt class="descname">get</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a single model</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.filter">
<tt class="descname">filter</tt><big>(</big><em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object with filtering clauses</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.begin">
<tt class="descname">begin</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a new <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction" title="pulsar.apps.data.odm.transaction.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.create">
<tt class="descname">create</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a> and commit to server.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.new">
<tt class="descname">new</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.new" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a> and commit to server.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.insert">
<tt class="descname">insert</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a> and commit to server.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an existing <tt class="docutils literal"><span class="pre">instance</span></tt> of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a>.</p>
<p>The instance must have already contain the primary key.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.save">
<tt class="descname">save</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an <tt class="docutils literal"><span class="pre">instance</span></tt> of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.manager.Manager.delete">
<tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/manager.html#Manager.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.manager.Manager.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an existing <tt class="docutils literal"><span class="pre">instance</span></tt> of <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager._model" title="pulsar.apps.data.odm.manager.Manager._model"><tt class="xref py py-attr docutils literal"><span class="pre">_model</span></tt></a></p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.mapper"></span></div>
<div class="section" id="mapper">
<h3>Mapper<a class="headerlink" href="#mapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.mapper.Mapper">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.mapper.</tt><tt class="descname">Mapper</tt><big>(</big><em>default_store</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapper is a mapping of <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> to a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>.</p>
<p>The <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> are registered with a <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">asyncstore</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="n">models</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Mapper</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="n">models</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyModel</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="c"># dictionary Notation</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">MyModel</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>

<span class="c"># or dotted notation (lowercase)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">mymodel</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">models</span></tt> instance in the above snippet can be set globally if
one wishes to do so.</p>
<p>A <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> has four events:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">pre_commit</span></tt>: fired before instances are committed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">bind_event</span><span class="p">(</span><span class="s">&#39;pre_commit&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pre_delete</span></tt>: fired before instances are deleted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">bind_event</span><span class="p">(</span><span class="s">&#39;pre_delete&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pre_commit</span></tt>: fired after instances are committed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">bind_event</span><span class="p">(</span><span class="s">&#39;post_commit&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">post_delete</span></tt>: fired after instances are deleted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">bind_event</span><span class="p">(</span><span class="s">&#39;post_delete&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<dl class="exception">
<dt id="pulsar.apps.data.odm.mapper.Mapper.ModelNotFound">
<em class="property">exception </em><tt class="descname">ModelNotFound</tt><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.ModelNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager.get" title="pulsar.apps.data.odm.manager.Manager.get"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.get()</span></tt></a> method does not find any model</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.mapper.Mapper.default_store">
<tt class="descclassname">Mapper.</tt><tt class="descname">default_store</tt><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.default_store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.default_store" title="Permalink to this definition">¶</a></dt>
<dd><p>The default <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> for this <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.</p>
<p>Used when calling the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.register" title="pulsar.apps.data.odm.mapper.Mapper.register"><tt class="xref py py-meth docutils literal"><span class="pre">register()</span></tt></a> method without explicitly
passing a <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.mapper.Mapper.registered_models">
<tt class="descclassname">Mapper.</tt><tt class="descname">registered_models</tt><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.registered_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.registered_models" title="Permalink to this definition">¶</a></dt>
<dd><p>List of registered <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.mapper.Mapper.search_engine">
<tt class="descclassname">Mapper.</tt><tt class="descname">search_engine</tt><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.search_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.search_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.data.odm.searchengine.SearchEngine" title="pulsar.apps.data.odm.searchengine.SearchEngine"><tt class="xref py py-class docutils literal"><span class="pre">SearchEngine</span></tt></a> for this <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.</p>
<p>This must be created by users and intalled on a mapper via the
<a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.set_search_engine" title="pulsar.apps.data.odm.mapper.Mapper.set_search_engine"><tt class="xref py py-meth docutils literal"><span class="pre">set_search_engine()</span></tt></a> method.
Check <a class="reference internal" href="#odm-search"><em>full text search</em></a>
tutorial for information.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.begin">
<tt class="descclassname">Mapper.</tt><tt class="descname">begin</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a new <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction" title="pulsar.apps.data.odm.transaction.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.set_search_engine">
<tt class="descclassname">Mapper.</tt><tt class="descname">set_search_engine</tt><big>(</big><em>engine</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.set_search_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.set_search_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="#pulsar.apps.data.odm.searchengine.SearchEngine" title="pulsar.apps.data.odm.searchengine.SearchEngine"><tt class="xref py py-class docutils literal"><span class="pre">SearchEngine</span></tt></a> for this <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.</p>
<p>Check <a class="reference internal" href="#odm-search"><em>full text search</em></a>
tutorial for information.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.register">
<tt class="descclassname">Mapper.</tt><tt class="descname">register</tt><big>(</big><em>*models</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register one or several <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> with this <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a>.</p>
<p>If a model was already registered it does nothing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>models</strong> &#8211; a list of <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a></li>
<li><strong>store</strong> &#8211; a <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> or a connection string.</li>
<li><strong>read_store</strong> &#8211; Optional <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> for read
operations. This is useful when the server has a master/slave
configuration, where the master accept write and read operations
and the <tt class="docutils literal"><span class="pre">slave</span></tt> read only operations (Redis).</li>
<li><strong>include_related</strong> &#8211; <tt class="docutils literal"><span class="pre">True</span></tt> if related models to <tt class="docutils literal"><span class="pre">model</span></tt>
needs to be registered.
Default <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
<li><strong>params</strong> &#8211; Additional parameters for the <a class="reference internal" href="clients.html#pulsar.apps.data.store.create_store" title="pulsar.apps.data.store.create_store"><tt class="xref py py-func docutils literal"><span class="pre">create_store()</span></tt></a>
function.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a list models registered or a single model if there
was only one</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.from_uuid">
<tt class="descclassname">Mapper.</tt><tt class="descname">from_uuid</tt><big>(</big><em>uuid</em>, <em>session=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.from_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.from_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from its universally unique identifier
<tt class="docutils literal"><span class="pre">uuid</span></tt>. If the <tt class="docutils literal"><span class="pre">uuid</span></tt> does not match any instance an exception will raise.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.flush">
<tt class="descclassname">Mapper.</tt><tt class="descname">flush</tt><big>(</big><em>exclude=None</em>, <em>include=None</em>, <em>dryrun=False</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.registered_models" title="pulsar.apps.data.odm.mapper.Mapper.registered_models"><tt class="xref py py-attr docutils literal"><span class="pre">registered_models</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>exclude</strong> &#8211; optional list of model names to exclude.</li>
<li><strong>include</strong> &#8211; optional list of model names to include.</li>
<li><strong>dryrun</strong> &#8211; Doesn&#8217;t remove anything, simply collect managers
to flush.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.unregister">
<tt class="descclassname">Mapper.</tt><tt class="descname">unregister</tt><big>(</big><em>model=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.unregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a <tt class="docutils literal"><span class="pre">model</span></tt> if provided, otherwise it unregister all
registered models.</p>
<p>Return a list of unregistered model managers or <tt class="docutils literal"><span class="pre">None</span></tt>
if no managers were removed.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.register_applications">
<tt class="descclassname">Mapper.</tt><tt class="descname">register_applications</tt><big>(</big><em>applications</em>, <em>models=None</em>, <em>stores=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.register_applications"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.register_applications" title="Permalink to this definition">¶</a></dt>
<dd><p>A higher level registration method for group of models located
on application modules.</p>
<p>It uses the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.model_iterator" title="pulsar.apps.data.odm.mapper.Mapper.model_iterator"><tt class="xref py py-meth docutils literal"><span class="pre">model_iterator()</span></tt></a> method to iterate
through all <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> available in <tt class="docutils literal"><span class="pre">applications</span></tt>
and <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.register" title="pulsar.apps.data.odm.mapper.Mapper.register"><tt class="xref py py-meth docutils literal"><span class="pre">register()</span></tt></a> them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>applications</strong> &#8211; A String or a list of strings representing
python dotted paths where models are implemented. Can also be
a module or a list of modules.</li>
<li><strong>models</strong> &#8211; Optional list of models to include. If not provided
all models found in <em>applications</em> will be included.</li>
<li><strong>stores</strong> &#8211; optional dictionary which map a model or an
application to a store
<a class="reference internal" href="clients.html#connection-string"><em>connection string</em></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A list of registered <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mapper</span><span class="o">.</span><span class="n">register_applications</span><span class="p">(</span><span class="s">&#39;mylib.myapp&#39;</span><span class="p">)</span>
<span class="n">mapper</span><span class="o">.</span><span class="n">register_applications</span><span class="p">([</span><span class="s">&#39;mylib.myapp&#39;</span><span class="p">,</span> <span class="s">&#39;another.path&#39;</span><span class="p">])</span>
<span class="n">mapper</span><span class="o">.</span><span class="n">register_applications</span><span class="p">(</span><span class="n">pythonmodule</span><span class="p">)</span>
<span class="n">mapper</span><span class="o">.</span><span class="n">register_applications</span><span class="p">([</span><span class="s">&#39;mylib.myapp&#39;</span><span class="p">,</span> <span class="n">pythonmodule</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.create_tables">
<tt class="descclassname">Mapper.</tt><tt class="descname">create_tables</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.create_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.create_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop though <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.registered_models" title="pulsar.apps.data.odm.mapper.Mapper.registered_models"><tt class="xref py py-attr docutils literal"><span class="pre">registered_models</span></tt></a> and issue the
<a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager.create_table" title="pulsar.apps.data.odm.manager.Manager.create_table"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.create_table()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.drop_tables">
<tt class="descclassname">Mapper.</tt><tt class="descname">drop_tables</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.drop_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.drop_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop though <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.registered_models" title="pulsar.apps.data.odm.mapper.Mapper.registered_models"><tt class="xref py py-attr docutils literal"><span class="pre">registered_models</span></tt></a> and issue the
<a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager.drop_table" title="pulsar.apps.data.odm.manager.Manager.drop_table"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.drop_table()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.models_from_model">
<tt class="descclassname">Mapper.</tt><tt class="descname">models_from_model</tt><big>(</big><em>model</em>, <em>include_related=False</em>, <em>exclude=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.models_from_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.models_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of all model in model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a></li>
<li><strong>include_related</strong> &#8211; if <tt class="docutils literal"><span class="pre">True</span></tt> al related models to <tt class="docutils literal"><span class="pre">model</span></tt>
are included</li>
<li><strong>exclude</strong> &#8211; optional set of models to exclude</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.mapper.Mapper.model_iterator">
<tt class="descclassname">Mapper.</tt><tt class="descname">model_iterator</tt><big>(</big><em>application</em>, <em>include_related=True</em>, <em>exclude=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/mapper.html#Mapper.model_iterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.mapper.Mapper.model_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator of <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> classes found in <em>application</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>application</strong> &#8211; A python dotted path or an iterable over
python dotted-paths where models are defined.</td>
</tr>
</tbody>
</table>
<p>Only models defined in these paths are considered.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.transaction"></span></div>
<div class="section" id="transaction">
<h3>Transaction<a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.transaction.Transaction">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.transaction.</tt><tt class="descname">Transaction</tt><big>(</big><em>mapper</em>, <em>name=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Transaction class for pipelining commands to a <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a>.</p>
<p>A <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction" title="pulsar.apps.data.odm.transaction.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> is usually obtained via the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper.begin" title="pulsar.apps.data.odm.mapper.Mapper.begin"><tt class="xref py py-meth docutils literal"><span class="pre">Mapper.begin()</span></tt></a>
method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
<p>or using the <tt class="docutils literal"><span class="pre">with</span></tt> context manager:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">models</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.transaction.Transaction.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction" title="pulsar.apps.data.odm.transaction.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> name</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.transaction.Transaction.mapper">
<tt class="descname">mapper</tt><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> which initialised this transaction.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.transaction.Transaction._commands">
<tt class="descname">_commands</tt><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction._commands" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary of commands for each <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> in this transaction.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.transaction.Transaction.deleted">
<tt class="descname">deleted</tt><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of list of ids deleted from the backend server after a
commit operation. This dictionary is only available once the
transaction has <tt class="xref py py-attr docutils literal"><span class="pre">finished</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.transaction.Transaction.saved">
<tt class="descname">saved</tt><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.saved" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of list of ids saved in the backend server after a commit
operation. This dictionary is only available once the transaction has
<tt class="xref py py-attr docutils literal"><span class="pre">finished</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.execute">
<tt class="descname">execute</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Queue a command in the default data store.</p>
<p>This method does not use the object data mapper.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.add">
<tt class="descname">add</tt><big>(</big><em>model</em>, <em>action=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <tt class="docutils literal"><span class="pre">model</span></tt> to the transaction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> instance. It must be registered
with the <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction.mapper" title="pulsar.apps.data.odm.transaction.Transaction.mapper"><tt class="xref py py-attr docutils literal"><span class="pre">mapper</span></tt></a> which created this <a class="reference internal" href="#pulsar.apps.data.odm.transaction.Transaction" title="pulsar.apps.data.odm.transaction.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>.</li>
<li><strong>action</strong> &#8211; Optional CRUD action to perform</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the <tt class="docutils literal"><span class="pre">model</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.update">
<tt class="descname">update</tt><big>(</big><em>instance_or_query</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an <tt class="docutils literal"><span class="pre">instance</span></tt> or a <tt class="docutils literal"><span class="pre">query</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.tstore">
<tt class="descname">tstore</tt><big>(</big><em>store</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.tstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.tstore" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <tt class="xref py py-class docutils literal"><span class="pre">TransactionStore</span></tt> for <tt class="docutils literal"><span class="pre">store</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.commit">
<tt class="descname">commit</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction.</p>
<p>This method can be invoked once only otherwise an
<tt class="xref py py-class docutils literal"><span class="pre">InvalidOperation</span></tt> occurs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/asyncio-task.html#asyncio.Future" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Future</span></tt></a> which results in the list
of  transaction</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.transaction.Transaction.wait">
<tt class="descname">wait</tt><big>(</big><em>callback=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/transaction.html#Transaction.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.transaction.Transaction.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for the transaction have finished.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> &#8211; optional function called back once the transaction
has finished. The function receives one parameter only, the
transaction.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/asyncio-task.html#asyncio.Future" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Future</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.fields"></span></div>
<div class="section" id="field">
<h3>Field<a class="headerlink" href="#field" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.Field">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">Field</tt><big>(</big><em>unique=False</em>, <em>primary_key=None</em>, <em>required=None</em>, <em>index=None</em>, <em>hidden=False</em>, <em>as_cache=False</em>, <em>**extras</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#Field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class of all <a class="reference internal" href="#module-pulsar.apps.data.odm" title="pulsar.apps.data.odm"><tt class="xref py py-mod docutils literal"><span class="pre">odm</span></tt></a> Fields.</p>
<p>Each field is specified as a <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> class attribute.</p>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.index">
<tt class="descname">index</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Some data stores requires to create indexes when performing specific
queries.</p>
<p>Default <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.unique">
<tt class="descname">unique</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt>, the field must be unique throughout the model.
In this case <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.index" title="pulsar.apps.data.odm.fields.Field.index"><tt class="xref py py-attr docutils literal"><span class="pre">index</span></tt></a> is also <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<p>Default <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.primary_key">
<tt class="descname">primary_key</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt>, this field is the primary key for the model.</p>
<p>A primary key field has the following properties:</p>
<ul class="simple">
<li><a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.unique" title="pulsar.apps.data.odm.fields.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique</span></tt></a> is also <tt class="docutils literal"><span class="pre">True</span></tt></li>
<li>There can be only one in a model</li>
<li>If not specified a <tt class="xref py py-class docutils literal"><span class="pre">AutoIdField</span></tt> will be added</li>
</ul>
<p>Default <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.required">
<tt class="descname">required</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.required" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">False</span></tt>, the field is allowed to be null.</p>
<p>Default <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.default">
<tt class="descname">default</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default value for this field. It can be a callable attribute.</p>
<p>Default <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Field name, created by the <tt class="docutils literal"><span class="pre">odm</span></tt> at runtime.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.store_name">
<tt class="descname">store_name</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.store_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name for the field, created by the <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.get_store_name" title="pulsar.apps.data.odm.fields.Field.get_store_name"><tt class="xref py py-meth docutils literal"><span class="pre">get_store_name()</span></tt></a>
method at runtime. For most field, its value is the same as the
<a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.name" title="pulsar.apps.data.odm.fields.Field.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a>. It is the field stored in the backend database.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.data.odm.model.ModelMeta" title="pulsar.apps.data.odm.model.ModelMeta"><tt class="xref py py-class docutils literal"><span class="pre">ModelMeta</span></tt></a> holding the field.
Created by the <tt class="docutils literal"><span class="pre">odm</span></tt> at runtime.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.charset">
<tt class="descname">charset</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>The charset used for encoding decoding text.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.hidden">
<tt class="descname">hidden</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.hidden" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt> the field will be hidden from search algorithms.</p>
<p>Default <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.python_type">
<tt class="descname">python_type</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.python_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The python <tt class="docutils literal"><span class="pre">type</span></tt> for the <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.Field.as_cache">
<tt class="descname">as_cache</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.as_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="docutils literal"><span class="pre">True</span></tt> the field contains data which is considered cache and
therefore always reproducible. Field marked as cache, have
<a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.required" title="pulsar.apps.data.odm.fields.Field.required"><tt class="xref py py-attr docutils literal"><span class="pre">required</span></tt></a> always <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<p>This attribute is used by the <tt class="xref py py-class docutils literal"><span class="pre">Model.fieldvalue_pairs</span></tt> method
which returns a dictionary of field names and values.</p>
<p>Default <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.fields.Field.register_with_model">
<tt class="descname">register_with_model</tt><big>(</big><em>name</em>, <em>model</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#Field.register_with_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.register_with_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Called during the creation of a the <tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt>
class when <tt class="xref py py-class docutils literal"><span class="pre">Metaclass</span></tt> is initialised. It fills
<a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.name" title="pulsar.apps.data.odm.fields.Field.name"><tt class="xref py py-attr docutils literal"><span class="pre">Field.name</span></tt></a> and <tt class="xref py py-attr docutils literal"><span class="pre">Field.model</span></tt>. This is an internal
function users should never call.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.fields.Field.add_to_fields">
<tt class="descname">add_to_fields</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#Field.add_to_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.add_to_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add this <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> to the fields of <tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.fields.Field.get_store_name">
<tt class="descname">get_store_name</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#Field.get_store_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.get_store_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field.store_name" title="pulsar.apps.data.odm.fields.Field.store_name"><tt class="xref py py-attr docutils literal"><span class="pre">store_name</span></tt></a> at runtime</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.fields.Field.get_default">
<tt class="descname">get_default</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#Field.get_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.Field.get_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default value for this <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="charfield">
<h3>CharField<a class="headerlink" href="#charfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.CharField">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">CharField</tt><big>(</big><em>unique=False</em>, <em>primary_key=None</em>, <em>required=None</em>, <em>index=None</em>, <em>hidden=False</em>, <em>as_cache=False</em>, <em>**extras</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#CharField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.CharField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="integerfield">
<h3>IntegerField<a class="headerlink" href="#integerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.IntegerField">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">IntegerField</tt><big>(</big><em>unique=False</em>, <em>primary_key=None</em>, <em>required=None</em>, <em>index=None</em>, <em>hidden=False</em>, <em>as_cache=False</em>, <em>**extras</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#IntegerField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.IntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="floatfield">
<h3>FloatField<a class="headerlink" href="#floatfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.FloatField">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">FloatField</tt><big>(</big><em>unique=False</em>, <em>primary_key=None</em>, <em>required=None</em>, <em>index=None</em>, <em>hidden=False</em>, <em>as_cache=False</em>, <em>**extras</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#FloatField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.FloatField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="foreignkey">
<h3>ForeignKey<a class="headerlink" href="#foreignkey" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.ForeignKey">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">ForeignKey</tt><big>(</big><em>model</em>, <em>related_name=None</em>, <em>related_manager_class=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#ForeignKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.ForeignKey" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#pulsar.apps.data.odm.fields.Field" title="pulsar.apps.data.odm.fields.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> defining a <a class="reference internal" href="#one-to-many"><em>one-to-many</em></a>
objects relationship.</p>
<p>It requires a positional argument representing the <a class="reference internal" href="#pulsar.apps.data.odm.model.Model" title="pulsar.apps.data.odm.model.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>
to which the model containing this field is related. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Folder</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">File</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Folder</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;files&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To create a recursive relationship, an object that has a many-to-one
relationship with itself use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">odm</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;self&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Behind the scenes, the <a class="reference internal" href="#odm"><em>odm</em></a> appends <tt class="docutils literal"><span class="pre">_id</span></tt> to the field
name to create
its field name in the back-end data-server. In the above example,
the database field for the <tt class="docutils literal"><span class="pre">File</span></tt> model will have a <tt class="docutils literal"><span class="pre">folder_id</span></tt> field.</p>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.ForeignKey.related_name">
<tt class="descname">related_name</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.ForeignKey.related_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional name to use for the relation from the related object
back to <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.ForeignKey.proxy_class">
<tt class="descname">proxy_class</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.ForeignKey.proxy_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">LazyForeignKey</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.fields.ForeignKey.related_manager_class">
<tt class="descname">related_manager_class</tt><a class="headerlink" href="#pulsar.apps.data.odm.fields.ForeignKey.related_manager_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">OneToManyRelatedManager</span></tt></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fielderror">
<h3>FieldError<a class="headerlink" href="#fielderror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.fields.FieldError">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.fields.</tt><tt class="descname">FieldError</tt><a class="reference internal" href="../../modules/pulsar/apps/data/odm/fields.html#FieldError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.fields.FieldError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.query"></span></div>
<div class="section" id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.query.Query">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.query.</tt><tt class="descname">Query</tt><big>(</big><em>manager</em>, <em>store=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>A query for data in a model store.</p>
<p>A <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> is produced in terms of a given <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>,
using the <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager.query" title="pulsar.apps.data.odm.manager.Manager.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> method.</p>
<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.filter">
<tt class="descname">filter</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses.</p>
<p>The clauses corresponds to <tt class="docutils literal"><span class="pre">where</span></tt> or <tt class="docutils literal"><span class="pre">limit</span></tt> in a
<tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Params kwargs:</th><td class="field-body">dictionary of limiting clauses.</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s">&#39;planet&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.exclude">
<tt class="descname">exclude</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.exclude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses.</p>
<p>The clauses correspond to <tt class="docutils literal"><span class="pre">EXCEPT</span></tt> in a <tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<p>Using an equivalent example to the <a class="reference internal" href="#pulsar.apps.data.odm.query.Query.filter" title="pulsar.apps.data.odm.query.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="n">result1</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s">&#39;planet&#39;</span><span class="p">)</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;planet&#39;</span><span class="p">,</span><span class="s">&#39;stars&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.union">
<tt class="descname">union</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.union"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form unions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queries</strong> &#8211; positional <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> parameters to create an
union with.</td>
</tr>
</tbody>
</table>
<p>For example, lets say we want to have the union
of two queries obtained from the <a class="reference internal" href="#pulsar.apps.data.odm.query.Query.filter" title="pulsar.apps.data.odm.query.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">mymanager</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field1</span><span class="o">=</span><span class="s">&#39;bla&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field2</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.intersect">
<tt class="descname">intersect</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.intersect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form intersection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queries</strong> &#8211; positional <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> parameters to create an
intersection with.</td>
</tr>
</tbody>
</table>
<p>For example, lets say we want to have the intersection
of two queries obtained from the <a class="reference internal" href="#pulsar.apps.data.odm.query.Query.filter" title="pulsar.apps.data.odm.query.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">mymanager</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field2</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field1</span><span class="o">=</span><span class="s">&#39;bla&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">q1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.load_related">
<tt class="descname">load_related</tt><big>(</big><em>related</em>, <em>*fields</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.load_related"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.load_related" title="Permalink to this definition">¶</a></dt>
<dd><p>It returns a new <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> that automatically
follows the foreign-key relationship <tt class="docutils literal"><span class="pre">related</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.count">
<tt class="descname">count</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of objects selected by this <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
<p>This method is efficient since the <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> does not
receive any data from the server apart from the number of
matched elements.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.all">
<tt class="descname">all</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.all" title="Permalink to this definition">¶</a></dt>
<dd><p>All objects selected by this <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.Query.delete">
<tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#Query.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.Query.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all objects selected by this <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="compiled-query">
<h3>Compiled Query<a class="headerlink" href="#compiled-query" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.query.CompiledQuery">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.query.</tt><tt class="descname">CompiledQuery</tt><big>(</big><em>store</em>, <em>query</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>A signature class for implementing a <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> in a
pulsar data <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a>.</p>
<dl class="attribute">
<dt id="pulsar.apps.data.odm.query.CompiledQuery._query">
<tt class="descname">_query</tt><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery._query" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying <a class="reference internal" href="#pulsar.apps.data.odm.query.Query" title="pulsar.apps.data.odm.query.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a></p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.data.odm.query.CompiledQuery._store">
<tt class="descname">_store</tt><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery._store" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="clients.html#pulsar.apps.data.store.Store" title="pulsar.apps.data.store.Store"><tt class="xref py py-class docutils literal"><span class="pre">Store</span></tt></a> executing the <tt class="xref py py-attr docutils literal"><span class="pre">query</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.CompiledQuery.count">
<tt class="descname">count</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of elements matching the <tt class="xref py py-attr docutils literal"><span class="pre">query</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.CompiledQuery.all">
<tt class="descname">all</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch all matching elements from the server.</p>
<p>Return a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/asyncio-task.html#asyncio.Future" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Future</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.CompiledQuery.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all matching elements from the server.</p>
<p>Return a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/asyncio-task.html#asyncio.Future" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Future</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.CompiledQuery.models">
<tt class="descname">models</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery.models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery.models" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a list of models from a list of dictionaries.</p>
<p>Uses the <tt class="xref py py-meth docutils literal"><span class="pre">Store.build_model()</span></tt> method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; list of dictionaries</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a list of models</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.query.CompiledQuery.aggregate">
<tt class="descname">aggregate</tt><big>(</big><em>kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/query.html#CompiledQuery.aggregate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.query.CompiledQuery.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate lookup parameters.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pulsar.apps.data.odm.searchengine"></span></div>
<div class="section" id="search-engine">
<h3>Search Engine<a class="headerlink" href="#search-engine" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.data.odm.searchengine.SearchEngine">
<em class="property">class </em><tt class="descclassname">pulsar.apps.data.odm.searchengine.</tt><tt class="descname">SearchEngine</tt><big>(</big><em>name</em>, <em>host</em>, <em>loop</em>, <em>database=None</em>, <em>user=None</em>, <em>password=None</em>, <em>encoding=None</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/searchengine.html#SearchEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.searchengine.SearchEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface class for a full text search engine</p>
<dl class="method">
<dt id="pulsar.apps.data.odm.searchengine.SearchEngine.set_mapper">
<tt class="descname">set_mapper</tt><big>(</big><em>mapper</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/searchengine.html#SearchEngine.set_mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.searchengine.SearchEngine.set_mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="#pulsar.apps.data.odm.mapper.Mapper" title="pulsar.apps.data.odm.mapper.Mapper"><tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt></a> for this search engine.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.searchengine.SearchEngine.upload">
<tt class="descname">upload</tt><big>(</big><em>items</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/searchengine.html#SearchEngine.upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.searchengine.SearchEngine.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload items to the search engine</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.data.odm.searchengine.SearchEngine.create_table">
<tt class="descname">create_table</tt><big>(</big><em>manager</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/data/odm/searchengine.html#SearchEngine.create_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.data.odm.searchengine.SearchEngine.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked when a <a class="reference internal" href="#pulsar.apps.data.odm.manager.Manager" title="pulsar.apps.data.odm.manager.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> creates the data store tables.</p>
<p>By default it does nothing, some search engine implementation
may need to do something here</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../../index.html">
  <img class="logo" width="200" src="../../static/pulsar.png" alt="pulsar" title="Pulsar"/>
</a>
</p>
<div class="g-plusone"></div>
<script type="text/javascript">
  window.___gcfg = {lang: 'en-GB'};
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<br>
<a href="https://twitter.com/share" class="twitter-share-button" data-size="large">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Object Data Mapper</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#mapper-managers">Mapper &amp; Managers</a><ul>
<li><a class="reference internal" href="#registration">Registration</a></li>
<li><a class="reference internal" href="#accessing-managers">Accessing managers</a></li>
<li><a class="reference internal" href="#create-an-instance">Create an instance</a></li>
<li><a class="reference internal" href="#multiple-backends">Multiple backends</a></li>
<li><a class="reference internal" href="#custom-managers">Custom managers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#querying-data">Querying Data</a><ul>
<li><a class="reference internal" href="#full-text-search">Full text search</a></li>
</ul>
</li>
<li><a class="reference internal" href="#relationships">Relationships</a><ul>
<li><a class="reference internal" href="#one-to-many">One-to-many</a></li>
<li><a class="reference internal" href="#many-to-many">Many-to-many</a></li>
<li><a class="reference internal" href="#the-through-model">The through model</a></li>
<li><a class="reference internal" href="#custom-through-model">Custom through model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-pulsar.apps.data.odm.model">API</a><ul>
<li><a class="reference internal" href="#model">Model</a></li>
<li><a class="reference internal" href="#model-meta">Model Meta</a></li>
<li><a class="reference internal" href="#manager">Manager</a></li>
<li><a class="reference internal" href="#mapper">Mapper</a></li>
<li><a class="reference internal" href="#transaction">Transaction</a></li>
<li><a class="reference internal" href="#field">Field</a></li>
<li><a class="reference internal" href="#charfield">CharField</a></li>
<li><a class="reference internal" href="#integerfield">IntegerField</a></li>
<li><a class="reference internal" href="#floatfield">FloatField</a></li>
<li><a class="reference internal" href="#foreignkey">ForeignKey</a></li>
<li><a class="reference internal" href="#fielderror">FieldError</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
<li><a class="reference internal" href="#compiled-query">Compiled Query</a></li>
<li><a class="reference internal" href="#search-engine">Search Engine</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="clients.html"
                        title="previous chapter">Datastore Clients</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="stores.html"
                        title="next chapter">Available Clients</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../sources/apps/data/odm.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>


<div class="footer">
     &copy; Copyright 2011-2014, Luca Sbardella.
   Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.
 </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-3900561-8']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>