<!DOCTYPE html>



<html>
<head>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <title>Test Suite &mdash; pulsar 0.8.5-beta.1 documentation</title>
    
    <link rel="stylesheet" href="../static/pulsar.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.5-beta.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="shortcut icon" href="../static/favicon.ico"/>
    <link rel="top" title="pulsar 0.8.5-beta.1 documentation" href="../index.html" />
    <link rel="next" title="Asynchronous Shell" href="shell.html" />
    <link rel="prev" title="Distributed Task Queue" href="tasks.html" /> 
</head>
 <body>



    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="shell.html" title="Asynchronous Shell"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tasks.html" title="Distributed Task Queue"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pulsar 0.8.5-beta.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="deck">
<div class="header">
    
        <p class="developmentversion">
        Documentation for pulsar's DEVELOPMENT version. Get the
        <a href="http://pythonhosted.org/pulsar/apps/test.html">release docs here</a>.
        </p>
    
</div>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pulsar.apps.test">
<span id="test-suite"></span><span id="apps-test"></span><h1>Test Suite<a class="headerlink" href="#module-pulsar.apps.test" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> is a testing framework for both synchronous and
asynchronous applications and for running tests in parallel
on multiple threads or processes.
It is used for testing pulsar but it can be used
as a test suite for any other library.</p>
<div class="section" id="introduction">
<span id="apps-test-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>To get started with pulsar asynchronous test suite is easy. The first thing to
do is to create a python <tt class="docutils literal"><span class="pre">script</span></tt> on the top level directory of your library,
let&#8217;s call it <tt class="docutils literal"><span class="pre">runtests.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps</span> <span class="kn">import</span> <span class="n">TestSuite</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">TestSuite</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">&#39;Test suite for my library&#39;</span><span class="p">,</span>
              <span class="n">modules</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;regression&#39;</span><span class="p">,</span>
                       <span class="p">(</span><span class="s">&#39;examples&#39;</span><span class="p">,</span> <span class="s">&#39;tests&#39;</span><span class="p">)))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">modules</span></tt> is a tuple/list which specifies where to
<a class="reference internal" href="#apps-test-loading"><em>search for test cases</em></a> to run.
In the above example the test suite will look for all python files
in the <tt class="docutils literal"><span class="pre">regression</span></tt> module (in a recursive fashion), and for modules
called <tt class="docutils literal"><span class="pre">tests</span></tt> in the <tt class="docutils literal"><span class="pre">examples</span></tt> module.</p>
<p>To run the test suite:</p>
<div class="highlight-python"><div class="highlight"><pre>python runtests.py
</pre></div>
</div>
<p>Type:</p>
<div class="highlight-python"><div class="highlight"><pre>python runtests.py --help
</pre></div>
</div>
<p>For a list different options/parameters which can be used when running tests.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Pulsar test suite help you speed up your tests!
Use <tt class="docutils literal"><span class="pre">setUpClass</span></tt> rather than <tt class="docutils literal"><span class="pre">setUp</span></tt>, use asynchronous tests and if
not possible add fire power with more test workers.</p>
<p class="last">Try with the <tt class="docutils literal"><span class="pre">-w</span> <span class="pre">8</span></tt> command line input for a laugh.</p>
</div>
<p>The next step is to actually write the tests.</p>
</div>
<div class="section" id="writing-a-test-case">
<h2>Writing a Test Case<a class="headerlink" href="#writing-a-test-case" title="Permalink to this headline">¶</a></h2>
<p>Only subclasses of  <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> are collected by this
application.
When running a test, pulsar looks for two extra method: <tt class="docutils literal"><span class="pre">_pre_setup</span></tt> and
<tt class="docutils literal"><span class="pre">_post_teardown</span></tt>. If the former is available, it is run just before the
<a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase.setUp" title="(in Python v3.5)"><tt class="xref py py-meth docutils literal"><span class="pre">setUp()</span></tt></a> method while if the latter is available,
it is run just after the <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase.tearDown" title="(in Python v3.5)"><tt class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></tt></a> method.
In addition, if the <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase.setUpClass" title="(in Python v3.5)"><tt class="xref py py-meth docutils literal"><span class="pre">setUpClass()</span></tt></a>
class methods is available, it is run just before
all tests functions are run and the <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase.tearDownClass" title="(in Python v3.5)"><tt class="xref py py-meth docutils literal"><span class="pre">tearDownClass()</span></tt></a>,
if available, is run just after all tests functions are run.</p>
<p>An example test case:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_async_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">maybe_async_function</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_simple_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Test functions are asynchronous, when they return a generator or a
<a class="reference external" href="http://python.readthedocs.org/en/latest/library/asyncio-task.html#asyncio.Future" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">Future</span></tt></a>, synchronous, when they return anything else.</p>
</div>
</div>
<div class="section" id="loading-tests">
<span id="apps-test-loading"></span><h2>Loading Tests<a class="headerlink" href="#loading-tests" title="Permalink to this headline">¶</a></h2>
<p>The loading of test cases is controlled by the <tt class="docutils literal"><span class="pre">modules</span></tt> parameter when
initialising the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps</span> <span class="kn">import</span> <span class="n">TestSuite</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">TestSuite</span><span class="p">(</span><span class="n">modules</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;tests&#39;</span><span class="p">,</span>
                      <span class="p">(</span><span class="s">&#39;examples&#39;</span><span class="p">,</span><span class="s">&#39;tests&#39;</span><span class="p">)))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> loads tests via the <a class="reference internal" href="#pulsar.apps.test.loader.TestLoader" title="pulsar.apps.test.loader.TestLoader"><tt class="xref py py-class docutils literal"><span class="pre">TestLoader</span></tt></a> class.</p>
<p>In the context of explaining the rules for loading tests, we refer to
an <tt class="docutils literal"><span class="pre">object</span></tt> as</p>
<ul class="simple">
<li>a <tt class="docutils literal"><span class="pre">module</span></tt> (including a directory module)</li>
<li>a python <tt class="docutils literal"><span class="pre">class</span></tt>.</li>
</ul>
<p>with this in mind:</p>
<ul class="simple">
<li>Directories that aren&#8217;t packages are not inspected. This means that if a
directory does not have a <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file, it won&#8217;t be inspected.</li>
<li>Any class that is a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> subclass is collected.</li>
<li>If an <tt class="docutils literal"><span class="pre">object</span></tt> starts with <tt class="docutils literal"><span class="pre">_</span></tt> or <tt class="docutils literal"><span class="pre">.</span></tt> it won&#8217;t be collected,
nor will any <tt class="docutils literal"><span class="pre">objects</span></tt> it contains.</li>
<li>If an <tt class="docutils literal"><span class="pre">object</span></tt> defines a <tt class="docutils literal"><span class="pre">__test__</span></tt> attribute that does not evaluate to
<tt class="docutils literal"><span class="pre">True</span></tt>, that object will not be collected, nor will any <tt class="docutils literal"><span class="pre">objects</span></tt>
it contains.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">modules</span></tt> parameter is a tuple or list of entries where each single
<tt class="docutils literal"><span class="pre">entry</span></tt> follows the rules:</p>
<ul>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">entry</span></tt> is a string, it indicates the <strong>dotted path</strong> relative
to the <strong>root</strong> directory (the directory of the script running the tests).
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modules</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;tests&#39;</span><span class="p">,</span> <span class="s">&#39;moretests.here&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">If an entry is two elements tuple, than the first element represents
a <strong>dotted path</strong> relative to the <strong>root</strong> directory and the
second element a <strong>pattern</strong> which modules (files or directories) must match
in order to be included in the search. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modules</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">,</span>
           <span class="p">(</span><span class="s">&#39;examples&#39;</span><span class="p">,</span> <span class="s">&#39;test*&#39;</span><span class="p">)</span>
           <span class="p">]</span>
</pre></div>
</div>
<p>load modules, from inside the <tt class="docutils literal"><span class="pre">examples</span></tt> module, starting with <tt class="docutils literal"><span class="pre">test</span></tt>.</p>
</li>
<li><p class="first">If an entry is a three elements tuple, it is the same as the <em>two elements
tuple</em> rule with the third element which specifies the top level <strong>tag</strong>
for all tests in this entry. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modules</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;bla&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
          <span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
<p>For example, the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">modules</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;bla&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;examples&#39;</span><span class="p">,</span><span class="s">&#39;test*&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>loads</p>
<ul class="simple">
<li>all tests from modules in the <tt class="docutils literal"><span class="pre">test</span></tt> directory,</li>
<li>all tests from the <tt class="docutils literal"><span class="pre">bla</span></tt> directory with top level tag <tt class="docutils literal"><span class="pre">foo</span></tt>,</li>
<li>all tests from modules which starts with <em>test</em> from the <tt class="docutils literal"><span class="pre">examples</span></tt>
directory.</li>
</ul>
<p>All top level modules will be added to the python <tt class="docutils literal"><span class="pre">path</span></tt>.</p>
</div>
<div class="section" id="options">
<span id="test-suite-options"></span><h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p>All standard <a class="reference internal" href="../settings.html#settings"><em>settings</em></a> can be applied to the test application.
In addition, the following options are
<a class="reference internal" href="../settings.html#setting-section-test"><em>test-suite specific</em></a>:</p>
<div class="section" id="sequential">
<span id="apps-test-sequential"></span><h3>sequential<a class="headerlink" href="#sequential" title="Permalink to this headline">¶</a></h3>
<p>By default, test functions within a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a>
are run in asynchronous fashion. This means that several test functions
may be executed at once depending on their return values.
By specifying the <a class="reference internal" href="../settings.html#setting-sequential"><em>&#8211;sequential</em></a> command line option,
the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a>
forces tests to be run in a sequential model, one after the other:</p>
<div class="highlight-python"><div class="highlight"><pre>python runtests.py --sequential
</pre></div>
</div>
<p>Alternatively, if you need to specify a Testcase which always runs its test
functions in a sequential way, you can use the <a class="reference internal" href="#pulsar.apps.test.utils.sequential" title="pulsar.apps.test.utils.sequential"><tt class="xref py py-func docutils literal"><span class="pre">sequential()</span></tt></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.test</span> <span class="kn">import</span> <span class="n">unittest</span><span class="p">,</span> <span class="n">sequential</span>

<span class="nd">@sequential</span>
<span class="k">class</span> <span class="nc">MyTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="list-labels">
<h3>list labels<a class="headerlink" href="#list-labels" title="Permalink to this headline">¶</a></h3>
<p>By passing the <tt class="docutils literal"><span class="pre">-l</span></tt> or <a class="reference internal" href="../settings.html#setting-list-labels"><em>&#8211;list-labels</em></a> flag
to the command line, the full list of test labels available is displayed:</p>
<div class="highlight-python"><div class="highlight"><pre>python runtests.py -l
</pre></div>
</div>
</div>
<div class="section" id="test-timeout">
<h3>test timeout<a class="headerlink" href="#test-timeout" title="Permalink to this headline">¶</a></h3>
<p>When running asynchronous tests, it can be useful to set a cap on how
long a test function can wait for results. This is what the
<a class="reference internal" href="../settings.html#setting-test-timeout"><em>&#8211;test-timeout</em></a> command line flag does:</p>
<div class="highlight-python"><div class="highlight"><pre>python runtests.py --test-timeout 10
</pre></div>
</div>
<p>Set the test timeout to 10 seconds.</p>
</div>
</div>
<div class="section" id="test-plugins">
<h2>Test Plugins<a class="headerlink" href="#test-plugins" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a> is a way to extend the test suite with additional
<a class="reference internal" href="#test-suite-options"><em>options</em></a> and behaviours implemented in
the various plugin&#8217;s callbacks.
There are two basic rules for plugins:</p>
<ul class="simple">
<li>Test plugin classes should subclass <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a>.</li>
<li>Test plugins may implement any of the methods described in the class
<a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> interface.</li>
</ul>
<p>Pulsar ships with two battery-included plugins:</p>
<div class="section" id="module-pulsar.apps.test.plugins.bench">
<span id="benchmark"></span><span id="bench-plugin"></span><h3>Benchmark<a class="headerlink" href="#module-pulsar.apps.test.plugins.bench" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#pulsar.apps.test.plugins.bench.BenchMark" title="pulsar.apps.test.plugins.bench.BenchMark"><tt class="xref py py-class docutils literal"><span class="pre">BenchMark</span></tt></a> is a <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a> for benchmarking test functions.</p>
<p>To use the plugin follow these three steps:</p>
<ul>
<li><p class="first">Included it in the test Suite:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.test</span> <span class="kn">import</span> <span class="n">TestSuite</span>
<span class="kn">from</span> <span class="nn">pulsar.apps.test.plugins</span> <span class="kn">import</span> <span class="n">bench</span>

<span class="k">def</span> <span class="nf">suite</span><span class="p">():</span>
    <span class="n">TestSuite</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">bench</span><span class="o">.</span><span class="n">BenchMark</span><span class="p">()))</span>
</pre></div>
</div>
</li>
<li><p class="first">Flag a <tt class="docutils literal"><span class="pre">unittest.TestCase</span></tt> class with the <tt class="docutils literal"><span class="pre">__benchmark__</span> <span class="pre">=</span> <span class="pre">True</span></tt>
class attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyBenchmark</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">__benchmark__</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">test_mybenchmark_function1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test_mybenchmark_function2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the test suite with the <tt class="docutils literal"><span class="pre">--benchmark</span></tt> command line option.</p>
</li>
</ul>
<p>The test class can implement additional methods to fine-tune how the
benchmark plugin evaluate the perfomance and display results:</p>
<ul class="simple">
<li>When implemented, the <tt class="docutils literal"><span class="pre">startUp</span></tt> method is invoked before each run
of a test function.</li>
<li>The time taken to run a test once can be modified by implementing
the <tt class="docutils literal"><span class="pre">getTime</span></tt> method which receives as only argument the time interval
taken.
By default it returns the same time interval.</li>
</ul>
<dl class="class">
<dt id="pulsar.apps.test.plugins.bench.BenchMark">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.plugins.bench.</tt><tt class="descname">BenchMark</tt><a class="reference internal" href="../modules/pulsar/apps/test/plugins/bench.html#BenchMark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.plugins.bench.BenchMark" title="Permalink to this definition">¶</a></dt>
<dd><p>Benchmarking addon for pulsar test suite.</p>
</dd></dl>

</div>
<div class="section" id="module-pulsar.apps.test.plugins.profile">
<span id="profile"></span><span id="profile-plugin"></span><h3>Profile<a class="headerlink" href="#module-pulsar.apps.test.plugins.profile" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#pulsar.apps.test.plugins.profile.Profile" title="pulsar.apps.test.plugins.profile.Profile"><tt class="xref py py-class docutils literal"><span class="pre">Profile</span></tt></a> is a <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a> for profiling
test cases and generating Html reports.
It uses the <a class="reference external" href="http://python.readthedocs.org/en/latest/library/profile.html#module-cProfile" title="(in Python v3.5)"><tt class="xref py py-mod docutils literal"><span class="pre">cProfile</span></tt></a> module from the standard library.</p>
<p>To use the plugin follow these two steps:</p>
<ul>
<li><p class="first">Included it in the test Suite:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.test</span> <span class="kn">import</span> <span class="n">TestSuite</span>
<span class="kn">from</span> <span class="nn">pulsar.apps.test.plugins</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="k">def</span> <span class="nf">suite</span><span class="p">():</span>
    <span class="n">TestSuite</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">profile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()))</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the test suite with the <tt class="docutils literal"><span class="pre">--profile</span></tt> command line option.</p>
</li>
</ul>
<dl class="class">
<dt id="pulsar.apps.test.plugins.profile.Profile">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.plugins.profile.</tt><tt class="descname">Profile</tt><a class="reference internal" href="../modules/pulsar/apps/test/plugins/profile.html#Profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.plugins.profile.Profile" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.test.TestPlugin</span></tt> for profiling test cases.</p>
</dd></dl>

</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Test Suite<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.TestSuite">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.</tt><tt class="descname">TestSuite</tt><big>(</big><em>callable=None</em>, <em>load_config=True</em>, <em>**params</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test.html#TestSuite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.TestSuite" title="Permalink to this definition">¶</a></dt>
<dd><p>An asynchronous test suite which works like a task queue.</p>
<p>Each task is a group of test methods in a python TestCase class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>modules</strong> &#8211; <p>An iterable over modules where to look for tests.
Alternatively it can be a callable returning the iterable over modules.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">suite</span> <span class="o">=</span> <span class="n">TestSuite</span><span class="p">(</span><span class="n">modules</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;regression&#39;</span><span class="p">,</span>
                           <span class="p">(</span><span class="s">&#39;examples&#39;</span><span class="p">,</span><span class="s">&#39;tests&#39;</span><span class="p">),</span>
                           <span class="p">(</span><span class="s">&#39;apps&#39;</span><span class="p">,</span><span class="s">&#39;test_*&#39;</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">get_modules</span><span class="p">(</span><span class="n">suite</span><span class="p">):</span>
    <span class="o">...</span>

<span class="n">suite</span> <span class="o">=</span> <span class="n">TestSuite</span><span class="p">(</span><span class="n">modules</span><span class="o">=</span><span class="n">get_modules</span><span class="p">)</span>
</pre></div>
</div>
<p>If not provided it is set as default to <tt class="docutils literal"><span class="pre">[&quot;tests&quot;]</span></tt> which loads all
python module from the tests module in a recursive fashion.
Check the the <a class="reference internal" href="#pulsar.apps.test.loader.TestLoader" title="pulsar.apps.test.loader.TestLoader"><tt class="xref py py-class docutils literal"><span class="pre">TestLoader</span></tt></a> for detailed information.</p>
</li>
<li><strong>result_class</strong> &#8211; Optional class for collecting test results.
By default it used the standard <a class="reference internal" href="#pulsar.apps.test.result.TestResult" title="pulsar.apps.test.result.TestResult"><tt class="xref py py-class docutils literal"><span class="pre">TestResult</span></tt></a>.</li>
<li><strong>plugins</strong> &#8211; Optional list of <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a> instances.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pulsar.apps.test.TestSuite.new_runner">
<tt class="descname">new_runner</tt><big>(</big><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test.html#TestSuite.new_runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.TestSuite.new_runner" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a> driving test cases.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.TestSuite.monitor_start">
<tt class="descname">monitor_start</tt><big>(</big><em>monitor</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test.html#TestSuite.monitor_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.TestSuite.monitor_start" title="Permalink to this definition">¶</a></dt>
<dd><p>When the monitor starts load all test classes into the queue</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pulsar.apps.test.loader">
<span id="test-loader"></span><h3>Test Loader<a class="headerlink" href="#module-pulsar.apps.test.loader" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.loader.TestLoader">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.loader.</tt><tt class="descname">TestLoader</tt><big>(</big><em>root</em>, <em>modules</em>, <em>runner</em>, <em>logger=None</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/loader.html#TestLoader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.loader.TestLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Classes used by the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> to aggregate tests
from a list of paths.</p>
<p>The way it works is simple, you give a <em>root</em> directory and a list
of submodules where to look for tests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>root</strong> &#8211; root path passed by the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a>.</li>
<li><strong>modules</strong> &#8211; list (or tuple) of entries where to look for tests.
Check <a class="reference internal" href="#apps-test-loading"><em>loading test documentation</em></a> for
more information.</li>
<li><strong>runner</strong> &#8211; The <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a> passed by the test suite.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pulsar.apps.test.loader.TestLoader.checktag">
<tt class="descname">checktag</tt><big>(</big><em>tag</em>, <em>import_tags</em>, <em>exclude_tags</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/loader.html#TestLoader.checktag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.loader.TestLoader.checktag" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if <tt class="docutils literal"><span class="pre">tag</span></tt> is in <tt class="docutils literal"><span class="pre">import_tags</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.loader.TestLoader.testmodules">
<tt class="descname">testmodules</tt><big>(</big><em>tags=None</em>, <em>exclude_tags=None</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/loader.html#TestLoader.testmodules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.loader.TestLoader.testmodules" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of <tt class="docutils literal"><span class="pre">tag</span></tt>, <tt class="docutils literal"><span class="pre">modules</span></tt> pairs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tags</strong> &#8211; optional list of tags to include, if not available all tags
will be included.</li>
<li><strong>exclude_tags</strong> &#8211; optional list of tags to exclude. If not provided no
tags will be excluded.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.loader.TestLoader.get_tests">
<tt class="descname">get_tests</tt><big>(</big><em>path</em>, <em>dotted_path</em>, <em>pattern</em>, <em>import_tags=None</em>, <em>tags=()</em>, <em>exclude_tags=None</em>, <em>parent=None</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/loader.html#TestLoader.get_tests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.loader.TestLoader.get_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect python modules for testing and return a generator of
tag,module pairs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; directory path where to search. Files starting with <tt class="docutils literal"><span class="pre">_</span></tt>
or <tt class="docutils literal"><span class="pre">.</span></tt> are excluded from the search, as well as non-python files.</li>
<li><strong>dotted_path</strong> &#8211; the dotted python path equivalent of <tt class="docutils literal"><span class="pre">path</span></tt>.</li>
<li><strong>parent</strong> &#8211; the parent module for the current one. This parameter
is passed by this function recursively.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="plugin">
<h3>Plugin<a class="headerlink" href="#plugin" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.result.Plugin">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.result.</tt><tt class="descname">Plugin</tt><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for all classes which are part of the <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a>.</p>
<p>Most classes used by the test application are plugins, for
example the <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a> itself,
the <a class="reference internal" href="#pulsar.apps.test.result.TestResult" title="pulsar.apps.test.result.TestResult"><tt class="xref py py-class docutils literal"><span class="pre">TestResult</span></tt></a> and the <a class="reference internal" href="#pulsar.apps.test.plugins.base.TestPlugin" title="pulsar.apps.test.plugins.base.TestPlugin"><tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt></a>.</p>
<dl class="attribute">
<dt id="pulsar.apps.test.result.Plugin.result">
<tt class="descname">result</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.test.result.Plugin.result" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional result</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.test.result.Plugin.stream">
<tt class="descname">stream</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.test.result.Plugin.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>handle for writing text on the default output.</p>
<p>Set by the <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a> at runtime.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.configure">
<tt class="descname">configure</tt><big>(</big><em>cfg</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.configure" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Called once just after construction of a <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a></dt>
<dd>and <strong>before any test class is loaded</strong>.</dd>
</dl>
<p>This is a chance to configure the <a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> or global variables
which may affect the way tests are run.
If it returns something other than <tt class="docutils literal"><span class="pre">None</span></tt> (for example an abort
message) it will stop the configuration of all subsequent
plugins and quit the test.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> &#8211; a <a class="reference internal" href="../api/utilities.html#pulsar.utils.config.Config" title="pulsar.utils.config.Config"><tt class="xref py py-class docutils literal"><span class="pre">Config</span></tt></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><tt class="docutils literal"><span class="pre">None</span></tt> unless the tests runner must be stopped.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.on_start">
<tt class="descname">on_start</tt><big>(</big><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.on_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.on_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> once only at startup.</p>
<p>This callback is invoked once all tests are loaded but before
the test suite starts running them.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.on_end">
<tt class="descname">on_end</tt><big>(</big><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.on_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.on_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the <a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> just before it stops.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.loadTestsFromTestCase">
<tt class="descname">loadTestsFromTestCase</tt><big>(</big><em>testcls</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.loadTestsFromTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.loadTestsFromTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when loading tests from the <tt class="docutils literal"><span class="pre">testcls</span></tt> class.</p>
<p>Can be used to modify the number of test functions loaded.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.startTestClass">
<tt class="descname">startTestClass</tt><big>(</big><em>testcls</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.startTestClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.startTestClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just before a <tt class="docutils literal"><span class="pre">testcls</span></tt> runs its tests.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.stopTestClass">
<tt class="descname">stopTestClass</tt><big>(</big><em>testcls</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.stopTestClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.stopTestClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just after a <tt class="docutils literal"><span class="pre">testcls</span></tt> has run its tests.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.startTest">
<tt class="descname">startTest</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.startTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.startTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just before a <tt class="docutils literal"><span class="pre">test</span></tt> function is executed.</p>
<p>This is run just before <tt class="docutils literal"><span class="pre">_pre_setup</span></tt> method.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.stopTest">
<tt class="descname">stopTest</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.stopTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.stopTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just after a <tt class="docutils literal"><span class="pre">test</span></tt> function has finished.</p>
<p>This is run just after the <tt class="docutils literal"><span class="pre">_post_teardown</span></tt> method.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.before_test_function_run">
<tt class="descname">before_test_function_run</tt><big>(</big><em>test</em>, <em>local</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.before_test_function_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.before_test_function_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used by plugins to manipulate the <tt class="docutils literal"><span class="pre">test</span></tt>
behaviour in the process domain where the test run.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.after_test_function_run">
<tt class="descname">after_test_function_run</tt><big>(</big><em>test</em>, <em>local</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.after_test_function_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.after_test_function_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executed in the <tt class="docutils literal"><span class="pre">test</span></tt> process domain, after the <tt class="docutils literal"><span class="pre">test</span></tt> has
finished.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.addSuccess">
<tt class="descname">addSuccess</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.addSuccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.addSuccess" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a <tt class="docutils literal"><span class="pre">test</span></tt> function succeed</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.addFailure">
<tt class="descname">addFailure</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.addFailure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.addFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a <tt class="docutils literal"><span class="pre">test</span></tt> function as a (test) failure</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.Plugin.addError">
<tt class="descname">addError</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#Plugin.addError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.Plugin.addError" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a <tt class="docutils literal"><span class="pre">test</span></tt> function as an (unexpected) error</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="test-runner">
<h3>Test Runner<a class="headerlink" href="#test-runner" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.result.TestRunner">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.result.</tt><tt class="descname">TestRunner</tt><big>(</big><em>plugins</em>, <em>stream</em>, <em>writercls=None</em>, <em>descriptions=True</em>, <em>logger=None</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> for asynchronously running tests.</p>
<dl class="method">
<dt id="pulsar.apps.test.result.TestRunner.loadTestsFromTestCase">
<tt class="descname">loadTestsFromTestCase</tt><big>(</big><em>test_cls</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestRunner.loadTestsFromTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestRunner.loadTestsFromTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all <tt class="docutils literal"><span class="pre">test</span></tt> functions for the <tt class="docutils literal"><span class="pre">test_cls</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestRunner.add">
<tt class="descname">add</tt><big>(</big><em>result</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestRunner.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestRunner.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new result to the <a class="reference internal" href="#pulsar.apps.test.result.Plugin.result" title="pulsar.apps.test.result.Plugin.result"><tt class="xref py py-attr docutils literal"><span class="pre">result</span></tt></a> container</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestRunner.before_test_function_run">
<tt class="descname">before_test_function_run</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestRunner.before_test_function_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestRunner.before_test_function_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just before the test is run,
in the test process domain.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestRunner.after_test_function_run">
<tt class="descname">after_test_function_run</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestRunner.after_test_function_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestRunner.after_test_function_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just after the test has finished,
in the test process domain.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="test-result">
<h3>Test Result<a class="headerlink" href="#test-result" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.result.TestResult">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.result.</tt><tt class="descname">TestResult</tt><big>(</big><em>descriptions=True</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> for collecting results/failures for test runs.</p>
<p>Each <a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> can access the <a class="reference internal" href="#pulsar.apps.test.result.TestRunner" title="pulsar.apps.test.result.TestRunner"><tt class="xref py py-class docutils literal"><span class="pre">TestRunner</span></tt></a> <tt class="docutils literal"><span class="pre">result</span></tt>
object via the <tt class="xref py py-attr docutils literal"><span class="pre">result</span></tt> attribute.</p>
<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.startTest">
<tt class="descname">startTest</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.startTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.startTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase the test counter</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.addError">
<tt class="descname">addError</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.addError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.addError" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an unexpected error has occurred.</p>
<p><tt class="docutils literal"><span class="pre">err</span></tt> is a tuple of values as returned by <tt class="docutils literal"><span class="pre">sys.exc_info()</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.addFailure">
<tt class="descname">addFailure</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.addFailure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.addFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an test failure has occurred.</p>
<p><tt class="docutils literal"><span class="pre">err</span></tt> is a tuple of values as returned by <tt class="docutils literal"><span class="pre">sys.exc_info()</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.addSkip">
<tt class="descname">addSkip</tt><big>(</big><em>test</em>, <em>reason</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.addSkip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.addSkip" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a test is skipped.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.addExpectedFailure">
<tt class="descname">addExpectedFailure</tt><big>(</big><em>test</em>, <em>err</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.addExpectedFailure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.addExpectedFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an expected failure/error occured.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.addUnexpectedSuccess">
<tt class="descname">addUnexpectedSuccess</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.addUnexpectedSuccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.addUnexpectedSuccess" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a test was expected to fail, but succeed.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.result.TestResult.wasSuccessful">
<tt class="descname">wasSuccessful</tt><big>(</big><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/result.html#TestResult.wasSuccessful"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.result.TestResult.wasSuccessful" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells whether or not this result was a success</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="test-plugin">
<h3>Test Plugin<a class="headerlink" href="#test-plugin" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.plugins.base.TestPlugin">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.plugins.base.</tt><tt class="descname">TestPlugin</tt><a class="reference internal" href="../modules/pulsar/apps/test/plugins/base.html#TestPlugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.plugins.base.TestPlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for <a class="reference internal" href="#pulsar.apps.test.result.Plugin" title="pulsar.apps.test.result.Plugin"><tt class="xref py py-class docutils literal"><span class="pre">Plugin</span></tt></a> which can be added to a
<a class="reference internal" href="#pulsar.apps.test.TestSuite" title="pulsar.apps.test.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">TestSuite</span></tt></a> to extend its functionalities.</p>
<p>If the class attribute <a class="reference internal" href="#pulsar.apps.test.loader.TestPlugin.name" title="pulsar.apps.test.loader.TestPlugin.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> is not specified or its value validate
as <tt class="docutils literal"><span class="pre">True</span></tt>, an additional <a class="reference internal" href="../settings.html#settings"><em>setting</em></a> is added to the
configuration.
In addition, a <tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt> can specify several additional
<a class="reference internal" href="../settings.html#settings"><em>settings</em></a> as class attributes. For example, the
<a class="reference internal" href="#bench-plugin"><em>benchmark plugin</em></a> has an additional setting
for controlling the number of repetitions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Bench</span><span class="p">(</span><span class="n">TestPlugin</span><span class="p">):</span>
    <span class="n">repeat</span> <span class="o">=</span> <span class="n">pulsar</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">validator</span><span class="o">=</span><span class="n">pulsar</span><span class="o">.</span><span class="n">validate_pos_int</span><span class="p">,</span>
                        <span class="n">desc</span><span class="o">=</span><span class="s">&quot;Default number of repetition&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="pulsar.apps.test.loader.TestPlugin.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.test.loader.TestPlugin.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Class attribute used for adding the default plugin
<a class="reference internal" href="../settings.html#settings"><em>setting</em></a>
to the configuration container of the test suite application.
If the attribute is not set, the class name in lower case is used.
If set and validate as not <tt class="docutils literal"><span class="pre">True</span></tt>, no new <a class="reference internal" href="../settings.html#settings"><em>setting</em></a>
is added to the test suite configuration parameters. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">TestPlugin</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<p>won&#8217;t add the default plugin <a class="reference internal" href="../settings.html#settings"><em>setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.test.loader.TestPlugin.desc">
<tt class="descname">desc</tt><a class="headerlink" href="#pulsar.apps.test.loader.TestPlugin.desc" title="Permalink to this definition">¶</a></dt>
<dd><p>Class attribute used as the description of the
<a class="reference internal" href="../settings.html#settings"><em>setting</em></a>.
If <a class="reference internal" href="#pulsar.apps.test.loader.TestPlugin.name" title="pulsar.apps.test.loader.TestPlugin.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> is disabled, this attribute is not relevant.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.test.loader.TestPlugin.config">
<tt class="descname">config</tt><a class="headerlink" href="#pulsar.apps.test.loader.TestPlugin.config" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../api/utilities.html#pulsar.utils.config.Config" title="pulsar.utils.config.Config"><tt class="xref py py-class docutils literal"><span class="pre">Config</span></tt></a> container created by the <tt class="xref py py-class docutils literal"><span class="pre">TestPlugin</span></tt>
metaclass. It collects the default setting, if
available, and any additional <a class="reference internal" href="../settings.html#settings"><em>settings</em></a> specified
as class attributes.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="populate">
<h3>Populate<a class="headerlink" href="#populate" title="Permalink to this headline">¶</a></h3>
<p>A useful function for populating random data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pulsar.apps.test</span> <span class="kn">import</span> <span class="n">populate</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">populate</span><span class="p">(</span><span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>gives you a list of 100 random strings</p>
<dl class="function">
<dt id="pulsar.apps.test.populate.populate">
<tt class="descclassname">pulsar.apps.test.populate.</tt><tt class="descname">populate</tt><big>(</big><em>datatype='string'</em>, <em>size=10</em>, <em>start=None</em>, <em>end=None</em>, <em>converter=None</em>, <em>choice_from=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/populate.html#populate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.populate.populate" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function for populating lists with random data.</p>
<p>Useful when populating database with data for fuzzy testing.</p>
<p>Supported data-types</p>
<ul>
<li><dl class="first docutils">
<dt><em>string</em></dt>
<dd><p class="first">For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">populate</span><span class="p">(</span><span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">min_len</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_len</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">create a 100 elements list with random strings
with random length between 3 and 10</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>date</em></dt>
<dd><p class="first">For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="n">populate</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1997</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
</pre></div>
</div>
<p class="last">create a 200 elements list with random datetime.date objects
between <em>start</em> and <em>end</em></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>integer</em></dt>
<dd><p class="first">For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">populate</span><span class="p">(</span><span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">create a 200 elements list with random integers between <tt class="docutils literal"><span class="pre">start</span></tt>
and <tt class="docutils literal"><span class="pre">end</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>float</em></dt>
<dd><p class="first">For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">populate</span><span class="p">(</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">create a 200 elements list with random floats between <tt class="docutils literal"><span class="pre">start</span></tt> and
<tt class="docutils literal"><span class="pre">end</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>choice</em> (elements of an iterable)</dt>
<dd><p class="first">For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">populate</span><span class="p">(</span><span class="s">&#39;choice&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">choice_from</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;pippo&#39;</span><span class="p">,</span><span class="s">&#39;pluto&#39;</span><span class="p">,</span><span class="s">&#39;blob&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p class="last">create a 200 elements list with random elements from <tt class="docutils literal"><span class="pre">choice_from</span></tt></p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

</div>
</div>
<div class="section" id="module-pulsar.apps.test.utils">
<span id="utilities"></span><h2>Utilities<a class="headerlink" href="#module-pulsar.apps.test.utils" title="Permalink to this headline">¶</a></h2>
<div class="section" id="run-on-arbiter">
<h3>run on arbiter<a class="headerlink" href="#run-on-arbiter" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="pulsar.apps.test.utils.run_on_arbiter">
<tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">run_on_arbiter</tt><big>(</big><em>f</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#run_on_arbiter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.run_on_arbiter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for running a test function in the <a class="reference internal" href="../api/actor.html#pulsar.async.arbiter.Arbiter" title="pulsar.async.arbiter.Arbiter"><tt class="xref py py-class docutils literal"><span class="pre">Arbiter</span></tt></a>
context domain.</p>
<p>This can be useful to test Arbiter mechanics.</p>
</dd></dl>

</div>
<div class="section" id="id2">
<h3>sequential<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="pulsar.apps.test.utils.sequential">
<tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">sequential</tt><big>(</big><em>cls</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#sequential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.sequential" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for a <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> which cause
its test functions to run sequentially rather than in an
asynchronous fashion.</p>
<p>Typical usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">pulsar.apps.test</span> <span class="kn">import</span> <span class="n">sequential</span>

<span class="nd">@sequenatial</span>
<span class="k">class</span> <span class="nc">MyTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>You can also run test functions sequentially when using the
<a class="reference internal" href="#apps-test-sequential"><em>sequential</em></a> flag in the command line.</p>
</dd></dl>

</div>
<div class="section" id="actortestmixin">
<h3>ActorTestMixin<a class="headerlink" href="#actortestmixin" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.utils.ActorTestMixin">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">ActorTestMixin</tt><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#ActorTestMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.ActorTestMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a>.</p>
<p>Useful for classes testing spawning of actors.
Make sure this is the first class you derive from, before the
<a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a>, so that the tearDown method is overwritten.</p>
<dl class="attribute">
<dt id="pulsar.apps.test.utils.ActorTestMixin.concurrency">
<tt class="descname">concurrency</tt><a class="headerlink" href="#pulsar.apps.test.utils.ActorTestMixin.concurrency" title="Permalink to this definition">¶</a></dt>
<dd><p>The concurrency model used to spawn actors via the <tt class="xref py py-meth docutils literal"><span class="pre">spawn()</span></tt>
method.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.test.utils.ActorTestMixin.spawn_actor">
<tt class="descname">spawn_actor</tt><big>(</big><em>concurrency=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#ActorTestMixin.spawn_actor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.ActorTestMixin.spawn_actor" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn a new actor and perform some tests.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="asyncassert">
<h3>AsyncAssert<a class="headerlink" href="#asyncassert" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.test.utils.AsyncAssert">
<em class="property">class </em><tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">AsyncAssert</tt><big>(</big><em>test</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#AsyncAssert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.AsyncAssert" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://users.rcn.com/python/download/Descriptor.htm">descriptor</a> added by the <em class="xref std std-ref">test-suite</em> to all python
<a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> loaded.</p>
<p>It can be used to invoke the same <tt class="docutils literal"><span class="pre">assertXXX</span></tt> methods available in
the <a class="reference external" href="http://python.readthedocs.org/en/latest/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> in an asynchronous fashion.</p>
<p>The descriptor is available via the <tt class="docutils literal"><span class="pre">async</span></tt> attribute.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">async</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Future</span><span class="p">()</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
        <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="run-test-server">
<h3>run test server<a class="headerlink" href="#run-test-server" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="pulsar.apps.test.utils.run_test_server">
<tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">run_test_server</tt><big>(</big><em>protocol_factory</em>, <em>loop</em>, <em>address=None</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#run_test_server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.run_test_server" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for running a test server:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">run_test_server</span><span class="p">(</span><span class="n">loop</span><span class="p">,</span> <span class="n">protocol_factory</span><span class="p">)</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>It creates a <a class="reference internal" href="../api/protocols.html#pulsar.async.protocols.TcpServer" title="pulsar.async.protocols.TcpServer"><tt class="xref py py-class docutils literal"><span class="pre">TcpServer</span></tt></a> and invoke
<a class="reference internal" href="../api/protocols.html#pulsar.async.protocols.TcpServer.stop_serving" title="pulsar.async.protocols.TcpServer.stop_serving"><tt class="xref py py-meth docutils literal"><span class="pre">stop_serving()</span></tt></a> on exit.</p>
</dd></dl>

</div>
<div class="section" id="check-server">
<h3>check server<a class="headerlink" href="#check-server" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="pulsar.apps.test.utils.check_server">
<tt class="descclassname">pulsar.apps.test.utils.</tt><tt class="descname">check_server</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="../modules/pulsar/apps/test/utils.html#check_server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.test.utils.check_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if server <tt class="docutils literal"><span class="pre">name</span></tt> is available at the address specified
<tt class="docutils literal"><span class="pre">&lt;name&gt;_server</span></tt> config value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../index.html">
  <img class="logo" width="200" src="../static/pulsar.png" alt="pulsar" title="Pulsar"/>
</a>
</p>
<div class="g-plusone"></div>
<script type="text/javascript">
  window.___gcfg = {lang: 'en-GB'};
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<br>
<a href="https://twitter.com/share" class="twitter-share-button" data-size="large">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Test Suite</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#writing-a-test-case">Writing a Test Case</a></li>
<li><a class="reference internal" href="#loading-tests">Loading Tests</a></li>
<li><a class="reference internal" href="#options">Options</a><ul>
<li><a class="reference internal" href="#sequential">sequential</a></li>
<li><a class="reference internal" href="#list-labels">list labels</a></li>
<li><a class="reference internal" href="#test-timeout">test timeout</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-plugins">Test Plugins</a><ul>
<li><a class="reference internal" href="#module-pulsar.apps.test.plugins.bench">Benchmark</a></li>
<li><a class="reference internal" href="#module-pulsar.apps.test.plugins.profile">Profile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#id1">Test Suite</a></li>
<li><a class="reference internal" href="#module-pulsar.apps.test.loader">Test Loader</a></li>
<li><a class="reference internal" href="#plugin">Plugin</a></li>
<li><a class="reference internal" href="#test-runner">Test Runner</a></li>
<li><a class="reference internal" href="#test-result">Test Result</a></li>
<li><a class="reference internal" href="#test-plugin">Test Plugin</a></li>
<li><a class="reference internal" href="#populate">Populate</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-pulsar.apps.test.utils">Utilities</a><ul>
<li><a class="reference internal" href="#run-on-arbiter">run on arbiter</a></li>
<li><a class="reference internal" href="#id2">sequential</a></li>
<li><a class="reference internal" href="#actortestmixin">ActorTestMixin</a></li>
<li><a class="reference internal" href="#asyncassert">AsyncAssert</a></li>
<li><a class="reference internal" href="#run-test-server">run test server</a></li>
<li><a class="reference internal" href="#check-server">check server</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tasks.html"
                        title="previous chapter">Distributed Task Queue</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="shell.html"
                        title="next chapter">Asynchronous Shell</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/apps/test.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>


<div class="footer">
     &copy; Copyright 2011-2014, Luca Sbardella.
   Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
 </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-3900561-8']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>