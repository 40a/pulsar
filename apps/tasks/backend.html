
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Task Backend &mdash; pulsar v0.5.0-beta.12 documentation</title>
    <link rel="stylesheet" href="../../static/pulsar.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.5.0-beta.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="shortcut icon" href="../../static/Game_of_life_pulsar.gif"/>
    <link rel="top" title="pulsar v0.5.0-beta.12 documentation" href="../../index.html" />
    <link rel="up" title="Distributed Task Queue" href="index.html" />
    <link rel="next" title="RPC" href="rpc.html" />
    <link rel="prev" title="Jobs" href="jobs.html" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="rpc.html" title="RPC"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="jobs.html" title="Jobs"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">pulsar v0.5.0-beta.12 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Distributed Task Queue</a> &raquo;</li> 
      </ul>
    </div>
<div class="deck">
<div class="header">
    
        <p class="developmentversion">
        Documentation for pulsar's DEVELOPMENT version. Get the 
        <a href="http://packages.python.org/pulsar/">release docs here</a>.
        </p>
    
</div>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pulsar.apps.tasks.backends">
<span id="task-backend"></span><span id="apps-taskqueue-backend"></span><h1>Task Backend<a class="headerlink" href="#module-pulsar.apps.tasks.backends" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> is at the hart of the
<a class="reference internal" href="index.html#apps-taskqueue"><em>task queue application</em></a>. It exposes
all the functionalities for running new tasks, scheduling periodic tasks
and retrieving task information. Pulsar ships with two backends, one which uses
pulsar internals and store tasks in the arbiter domain and another which stores
tasks in <a class="reference external" href="http://redis.io/">redis</a>.</p>
<div class="section" id="implementing-a-task-backend">
<h2>Implementing a Task Backend<a class="headerlink" href="#implementing-a-task-backend" title="Permalink to this headline">¶</a></h2>
<p>When creating a new <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> there are five methods which must
be implemented:</p>
<ul class="simple">
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.put_task" title="pulsar.apps.tasks.backends.TaskBackend.put_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.put_task()</span></tt></a> method, invoked when putting a new
<a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-class docutils literal"><span class="pre">Task.id</span></tt></a> into the distributed task queue, whatever that is.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.get_task" title="pulsar.apps.tasks.backends.TaskBackend.get_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.get_task()</span></tt></a> method, invoked when retrieving
a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend server.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.get_tasks" title="pulsar.apps.tasks.backends.TaskBackend.get_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.get_tasks()</span></tt></a> method, invoked when retrieving
a group of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend server.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.save_task" title="pulsar.apps.tasks.backends.TaskBackend.save_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.save_task()</span></tt></a> method, invoked when creating
or updating a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.delete_tasks" title="pulsar.apps.tasks.backends.TaskBackend.delete_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.delete_tasks()</span></tt></a> method, invoked when deleting
a bunch of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.</li>
</ul>
</div>
<div class="section" id="task">
<h2>Task<a class="headerlink" href="#task" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.Task">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">Task</tt><big>(</big><em>id</em>, <em>name=None</em>, <em>time_executed=None</em>, <em>expiry=None</em>, <em>args=None</em>, <em>kwargs=None</em>, <em>status=None</em>, <em>from_task=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for tasks which are produced by
<a class="reference internal" href="jobs.html#apps-taskqueue-job"><em>jobs or periodic jobs</em></a>.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.id">
<tt class="descname">id</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.id" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> unique id.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.name" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> name.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.status">
<tt class="descname">status</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#task-state"><em>status string</em></a> of task.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_executed">
<tt class="descname">time_executed</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_executed" title="Permalink to this definition">¶</a></dt>
<dd><p>date time when the task was executed.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_start">
<tt class="descname">time_start</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_start" title="Permalink to this definition">¶</a></dt>
<dd><p>date-time when the task calculation has started.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_end">
<tt class="descname">time_end</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_end" title="Permalink to this definition">¶</a></dt>
<dd><p>date-time when the task has finished.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.expiry">
<tt class="descname">expiry</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.expiry" title="Permalink to this definition">¶</a></dt>
<dd><p>optional date-time indicating when the task should expire.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.timeout">
<tt class="descname">timeout</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>A datetime or <tt class="xref docutils literal"><span class="pre">None</span></tt> indicating whether a timeout has occurred.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.from_task">
<tt class="descname">from_task</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.from_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> for the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> which queued
this <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>. This is a usuful for monitoring the creation
of tasks within other tasks.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.status_code">
<tt class="descname">status_code</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.status_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer indicating <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.status" title="pulsar.apps.tasks.backends.Task.status"><tt class="xref py py-attr docutils literal"><span class="pre">status</span></tt></a> precedence.
Lower number higher precedence.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.done">
<tt class="descname">done</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.done"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="xref docutils literal"><span class="pre">True</span></tt> if the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has finshed
(its status is one of <a class="reference internal" href="#task-state"><em>READY_STATES</em></a>).</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.duration">
<tt class="descname">duration</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.duration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> duration. Only available if the task status is in
<tt class="xref py py-attr docutils literal"><span class="pre">FULL_RUN_STATES</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.tojson">
<tt class="descname">tojson</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.tojson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the task instance into a JSON-serializable dictionary.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="taskbackend">
<h2>TaskBackend<a class="headerlink" href="#taskbackend" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.TaskBackend">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">TaskBackend</tt><big>(</big><em>scheme</em>, <em>host=None</em>, <em>name=None</em>, <em>connection_string=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../../api/application.html#pulsar.apps.Backend" title="pulsar.apps.Backend"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Backend</span></tt></a> class for <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.
A <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> is responsible for creating tasks and put them
into the distributed queue.
It also schedules the run of periodic tasks if enabled to do so.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.task_paths">
<tt class="descname">task_paths</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.task_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of paths where to upload <a class="reference internal" href="intro.html#app-taskqueue-job"><em>jobs</em></a> which
are factory of tasks. Passed by the task-queue application
<a class="reference internal" href="../../settings.html#setting-task-paths"><em>task paths setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.schedule_periodic">
<tt class="descname">schedule_periodic</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.schedule_periodic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.schedule_periodic" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> can schedule periodic tasks. Passed
by the task-queue application
<a class="reference internal" href="../../settings.html#setting-schedule-periodic"><em>schedule-periodic setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.backlog">
<tt class="descname">backlog</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.backlog" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of concurrent tasks running on a task-queue
<a class="reference internal" href="../../api/application.html#pulsar.apps.Worker" title="pulsar.apps.Worker"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Worker</span></tt></a>. A number in the order of 5 to 10 is normally
used. Passed by the task-queue application
<a class="reference internal" href="../../settings.html#setting-backlog"><em>backlog setting</em></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.start">
<tt class="descname">start</tt><big>(</big><em>worker</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>. Invoked by the
<a class="reference internal" href="../../api/application.html#pulsar.apps.Worker" title="pulsar.apps.Worker"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Worker</span></tt></a> which is ready to consume tasks.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.close">
<tt class="descname">close</tt><big>(</big><em>worker</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>. Invoked by the
<a class="reference internal" href="../../api/application.html#pulsar.apps.Worker" title="pulsar.apps.Worker"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Worker</span></tt></a> when is stopping.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.run">
<tt class="descname">run</tt><big>(</big><em>jobname</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.run" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.run_job" title="pulsar.apps.tasks.backends.TaskBackend.run_job"><tt class="xref py py-meth docutils literal"><span class="pre">run_job()</span></tt></a> without task meta parameters</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.run_job">
<tt class="descname">run_job</tt><big>(</big><em>jobname</em>, <em>targs=None</em>, <em>tkwargs=None</em>, <em>**meta_params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.run_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.run_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <em class="xref std std-ref">task</em> which may or
may not be queued. This method returns a <a class="reference internal" href="../../tutorials/coroutine.html#coroutine"><em>coroutine</em></a>.
If <em>jobname</em> is not a valid <a class="reference internal" href="jobs.html#pulsar.apps.tasks.models.Job.name" title="pulsar.apps.tasks.models.Job.name"><tt class="xref py py-attr docutils literal"><span class="pre">pulsar.apps.tasks.models.Job.name</span></tt></a>,
a <tt class="docutils literal"><span class="pre">TaskNotAvailable</span></tt> exception occurs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>jobname</strong> &#8211; the name of a <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> registered
with the <tt class="xref py py-class docutils literal"><span class="pre">TaskQueue</span></tt> application.</li>
<li><strong>targs</strong> &#8211; optional tuple used for the positional arguments in the
task callable.</li>
<li><strong>tkwargs</strong> &#8211; optional dictionary used for the key-valued arguments
in the task callable.</li>
<li><strong>meta_params</strong> &#8211; Additional parameters to be passed to the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>
constructor (not its callable function).</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="../../tutorials/coroutine.html#coroutine"><em>coroutine</em></a> resulting in a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a>
on success.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.queue_task">
<tt class="descname">queue_task</tt><big>(</big><em>task_id_or_task</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.queue_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.queue_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Actually put a <em>task_id_or_task</em> into the distributed task queue.
It invokes the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.put_task" title="pulsar.apps.tasks.backends.TaskBackend.put_task"><tt class="xref py py-meth docutils literal"><span class="pre">put_task()</span></tt></a> which is implemented by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.create_task_id">
<tt class="descname">create_task_id</tt><big>(</big><em>job</em>, <em>args</em>, <em>kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.create_task_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.create_task_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> from <em>job</em>, positional arguments <em>args</em>
and key-valued arguments <em>kwargs</em>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.create_task">
<tt class="descname">create_task</tt><big>(</big><em>jobname</em>, <em>targs=None</em>, <em>tkwargs=None</em>, <em>expiry=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.create_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.create_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from <em>jobname</em>, positional arguments
<em>targs</em>, key-valued arguments <em>tkwargs</em> and <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> meta parameters
<em>params</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>jobname</strong> &#8211; the name of job which create the task.</li>
<li><strong>targs</strong> &#8211; task positional arguments (a <tt class="docutils literal"><span class="pre">tuple</span></tt> or <tt class="xref docutils literal"><span class="pre">None</span></tt>).</li>
<li><strong>tkwargs</strong> &#8211; task key-valued arguments (a <tt class="docutils literal"><span class="pre">dict</span></tt> or <tt class="xref docutils literal"><span class="pre">None</span></tt>).</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="../../tutorials/coroutine.html#coroutine"><em>coroutine</em></a> resulting in a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a>
or <tt class="xref docutils literal"><span class="pre">None</span></tt> if no task was created.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.wait_for_task">
<tt class="descname">wait_for_task</tt><big>(</big><em>task_id</em><big>)</big><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.wait_for_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously wait for a task to have finish its execution. It
returns an <a class="reference external" href="tutorials-coroutine">asynchronous component</a></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.may_pool_task">
<tt class="descname">may_pool_task</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.may_pool_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.may_pool_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at every loop in the worker IO loop, it pool a new task
if possible and add it to the queue of tasks consumed by the worker
CPU-bound thread.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.execute_task">
<tt class="descname">execute_task</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.execute_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.execute_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous execution of a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>. This method is called
on a separate thread of execution from the worker evnet loop thread.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.tick">
<tt class="descname">tick</tt><big>(</big><em>now=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.tick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.tick" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a tick, that is one iteration of the scheduler. This
method only works when <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.schedule_periodic" title="pulsar.apps.tasks.backends.TaskBackend.schedule_periodic"><tt class="xref py py-attr docutils literal"><span class="pre">schedule_periodic</span></tt></a> is <tt class="xref docutils literal"><span class="pre">True</span></tt> and
the arbiter context.</p>
<p>Executes all due tasks and calculate the time in seconds to wait before
running a new <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.tick" title="pulsar.apps.tasks.backends.TaskBackend.tick"><tt class="xref py py-meth docutils literal"><span class="pre">tick()</span></tt></a>. For testing purposes a <tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt>
value <tt class="docutils literal"><span class="pre">now</span></tt> can be passed.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.on_start_task">
<tt class="descname">on_start_task</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.on_start_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.on_start_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> with <em>task_id</em> has started its
execution in the thread pool.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.on_finish_task">
<tt class="descname">on_finish_task</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.on_finish_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.on_finish_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> with <em>task_id</em> has finished its
execution in the thread pool.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.put_task">
<tt class="descname">put_task</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.put_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.put_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Put the <em>task_id</em> into the queue. Must be implemented
by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.get_task">
<tt class="descname">get_task</tt><big>(</big><em>task_id=None</em>, <em>when_done=False</em>, <em>timeout=1</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.get_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.get_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from a task id. Must be implemented
by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>task_id</strong> &#8211; the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> of the task to retrieve.</li>
<li><strong>when_done</strong> &#8211; if <tt class="xref docutils literal"><span class="pre">True</span></tt> return only when the task is in a ready state.</li>
<li><strong>timeout</strong> &#8211; timeout to use when polling a task from the distributed queue.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> or <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.get_tasks">
<tt class="descname">get_tasks</tt><big>(</big><em>**filters</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.get_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.get_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a group of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.save_task">
<tt class="descname">save_task</tt><big>(</big><em>task_id</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.save_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.save_task" title="Permalink to this definition">¶</a></dt>
<dd><p>create or update a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> with <em>task_id</em> and key-valued
parameters <em>params</em>. Must be implemented by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.delete_tasks">
<tt class="descname">delete_tasks</tt><big>(</big><em>task_ids=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.delete_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.delete_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a group of task. Must be implemented by subclasses.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="task-states">
<span id="task-state"></span><h2>Task states<a class="headerlink" href="#task-states" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> can have one of the following <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.status" title="pulsar.apps.tasks.backends.Task.status"><tt class="xref py py-attr docutils literal"><span class="pre">Task.status</span></tt></a> string:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">PENDING</span></tt> A task waiting to be queued for execution.</li>
<li><tt class="docutils literal"><span class="pre">QUEUED</span></tt> A task queued but not yet executed.</li>
<li><tt class="docutils literal"><span class="pre">RETRY</span></tt> A task is retrying calculation.</li>
<li><tt class="docutils literal"><span class="pre">STARTED</span></tt> task where execution has started.</li>
<li><tt class="docutils literal"><span class="pre">REVOKED</span></tt> the task execution has been revoked. One possible reason could be
the task has timed out.</li>
<li><tt class="docutils literal"><span class="pre">UNKNOWN</span></tt> task execution is unknown.</li>
<li><tt class="docutils literal"><span class="pre">FAILURE</span></tt> task execution has finished with failure.</li>
<li><tt class="docutils literal"><span class="pre">SUCCESS</span></tt> task execution has finished with success.</li>
</ul>
<p><strong>FULL_RUN_STATES</strong></p>
<p>The set of states for which a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has run:
<tt class="docutils literal"><span class="pre">FAILURE</span></tt> and <tt class="docutils literal"><span class="pre">SUCCESS</span></tt></p>
<p><strong>READY_STATES</strong></p>
<p>The set of states for which a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has finished:
<tt class="docutils literal"><span class="pre">REVOKED</span></tt>, <tt class="docutils literal"><span class="pre">FAILURE</span></tt> and <tt class="docutils literal"><span class="pre">SUCCESS</span></tt></p>
</div>
<div class="section" id="scheduler-entry">
<h2>Scheduler Entry<a class="headerlink" href="#scheduler-entry" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">SchedulerEntry</tt><big>(</big><em>name</em>, <em>schedule</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>last_run_at=None</em>, <em>total_run_count=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>A class used as a schedule entry in by a <tt class="xref py py-class docutils literal"><span class="pre">Scheduler</span></tt>.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Task name</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.schedule">
<tt class="descname">schedule</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>The schedule</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.last_run_at">
<tt class="descname">last_run_at</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.last_run_at" title="Permalink to this definition">¶</a></dt>
<dd><p>The time and date of when this task was last run.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.total_run_count">
<tt class="descname">total_run_count</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.total_run_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of times this periodic task has been executed by the
<tt class="xref py py-class docutils literal"><span class="pre">Scheduler</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.scheduled_last_run_at">
<tt class="descname">scheduled_last_run_at</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry.scheduled_last_run_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.scheduled_last_run_at" title="Permalink to this definition">¶</a></dt>
<dd><p>The scheduled last run datetime. This is different from
<a class="reference internal" href="#pulsar.apps.tasks.backends.SchedulerEntry.last_run_at" title="pulsar.apps.tasks.backends.SchedulerEntry.last_run_at"><tt class="xref py py-attr docutils literal"><span class="pre">last_run_at</span></tt></a> only when <tt class="xref py py-attr docutils literal"><span class="pre">anchor</span></tt> is set.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.next">
<tt class="descname">next</tt><big>(</big><em>now=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new instance of the same class, but with
its date and count fields updated. Function called by <tt class="xref py py-class docutils literal"><span class="pre">Scheduler</span></tt>
when the <tt class="docutils literal"><span class="pre">this</span></tt> is due to run.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../../index.html">
  <img class="logo" width="200" src="../../static/pulsar.png" alt="pulsar" title="Pulsar"/>
</a>
</p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Task Backend</a><ul>
<li><a class="reference internal" href="#implementing-a-task-backend">Implementing a Task Backend</a></li>
<li><a class="reference internal" href="#task">Task</a></li>
<li><a class="reference internal" href="#taskbackend">TaskBackend</a></li>
<li><a class="reference internal" href="#task-states">Task states</a></li>
<li><a class="reference internal" href="#scheduler-entry">Scheduler Entry</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="jobs.html"
                        title="previous chapter">Jobs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rpc.html"
                        title="next chapter">RPC</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../sources/apps/tasks/backend.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
        &copy; Copyright 2011-2013, Luca Sbardella.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-3900561-8']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>