<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Task Backend &mdash; pulsar 0.7.1-beta.1 documentation</title>
    
    <link rel="stylesheet" href="../../static/pulsar.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.7.1-beta.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="shortcut icon" href="../../static/Game_of_life_pulsar.gif"/>
    <link rel="top" title="pulsar 0.7.1-beta.1 documentation" href="../../index.html" />
    <link rel="up" title="Distributed Task Queue" href="index.html" />
    <link rel="next" title="RPC" href="rpc.html" />
    <link rel="prev" title="Jobs" href="jobs.html" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="rpc.html" title="RPC"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="jobs.html" title="Jobs"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">pulsar 0.7.1-beta.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Distributed Task Queue</a> &raquo;</li> 
      </ul>
    </div>
<div class="deck">
<div class="header">
    
        <p class="developmentversion">
        Documentation for pulsar's DEVELOPMENT version. Get the 
        <a href="http://pythonhosted.org/pulsar/apps/tasks/backend.html">release docs here</a>.
        </p>
    
</div>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pulsar.apps.tasks.backends">
<span id="task-backend"></span><span id="apps-taskqueue-backend"></span><h1>Task Backend<a class="headerlink" href="#module-pulsar.apps.tasks.backends" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> is at the heart of the
<a class="reference internal" href="index.html#apps-taskqueue"><em>task queue application</em></a>. It exposes
all the functionalities for running new tasks, scheduling periodic tasks
and retrieving task information. Pulsar ships with two backends, one which uses
pulsar internals and store tasks in the arbiter domain and another which stores
tasks in <a class="reference external" href="http://redis.io/">redis</a>.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The backend is created by the <a class="reference internal" href="intro.html#pulsar.apps.tasks.TaskQueue" title="pulsar.apps.tasks.TaskQueue"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.tasks.TaskQueue</span></tt></a>
as soon as it starts. It is then passed to all task queue workers
which, in turns, invoke the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.start" title="pulsar.apps.tasks.backends.TaskBackend.start"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend.start</span></tt></a> method
to start pulling tasks form the distributed task queue.</p>
<div class="section" id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h3>
<p>When creating a new <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> there are six methods which must
be implemented:</p>
<ul class="simple">
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.put_task" title="pulsar.apps.tasks.backends.TaskBackend.put_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.put_task()</span></tt></a> method, invoked when putting a new
<a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-class docutils literal"><span class="pre">Task.id</span></tt></a> into the distributed task queue, whatever that is.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.get_task" title="pulsar.apps.tasks.backends.TaskBackend.get_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.get_task()</span></tt></a> method, invoked when retrieving
a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend server.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.get_tasks" title="pulsar.apps.tasks.backends.TaskBackend.get_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.get_tasks()</span></tt></a> method, invoked when retrieving
a group of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend server.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.save_task" title="pulsar.apps.tasks.backends.TaskBackend.save_task"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.save_task()</span></tt></a> method, invoked when creating
or updating a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.delete_tasks" title="pulsar.apps.tasks.backends.TaskBackend.delete_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.delete_tasks()</span></tt></a> method, invoked when deleting
a bunch of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.</li>
<li>The <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.flush" title="pulsar.apps.tasks.backends.TaskBackend.flush"><tt class="xref py py-meth docutils literal"><span class="pre">TaskBackend.flush()</span></tt></a> method, invoked flushing a backend (remove
all tasks and clear the task queue).</li>
</ul>
</div>
<div class="section" id="task-states">
<span id="task-state"></span><h3>Task states<a class="headerlink" href="#task-states" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> can have one of the following <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.status" title="pulsar.apps.tasks.backends.Task.status"><tt class="xref py py-attr docutils literal"><span class="pre">Task.status</span></tt></a> string:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">PENDING</span></tt> A task waiting to be queued for execution.</li>
<li><tt class="docutils literal"><span class="pre">QUEUED</span></tt> A task queued but not yet executed.</li>
<li><tt class="docutils literal"><span class="pre">RETRY</span></tt> A task is retrying calculation.</li>
<li><tt class="docutils literal"><span class="pre">STARTED</span></tt> task where execution has started.</li>
<li><tt class="docutils literal"><span class="pre">REVOKED</span></tt> the task execution has been revoked. One possible reason could be
the task has timed out.</li>
<li><tt class="docutils literal"><span class="pre">UNKNOWN</span></tt> task execution is unknown.</li>
<li><tt class="docutils literal"><span class="pre">FAILURE</span></tt> task execution has finished with failure.</li>
<li><tt class="docutils literal"><span class="pre">SUCCESS</span></tt> task execution has finished with success.</li>
</ul>
<p><strong>FULL_RUN_STATES</strong></p>
<p>The set of states for which a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has run:
<tt class="docutils literal"><span class="pre">FAILURE</span></tt> and <tt class="docutils literal"><span class="pre">SUCCESS</span></tt></p>
<p><strong>READY_STATES</strong></p>
<p>The set of states for which a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has finished:
<tt class="docutils literal"><span class="pre">REVOKED</span></tt>, <tt class="docutils literal"><span class="pre">FAILURE</span></tt> and <tt class="docutils literal"><span class="pre">SUCCESS</span></tt></p>
</div>
<div class="section" id="task-status-broadcasting">
<span id="tasks-pubsub"></span><h3>Task status broadcasting<a class="headerlink" href="#task-status-broadcasting" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> broadcast <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> state into three different
channels via the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.pubsub" title="pulsar.apps.tasks.backends.TaskBackend.pubsub"><tt class="xref py py-attr docutils literal"><span class="pre">TaskBackend.pubsub</span></tt></a> handler.</p>
<p>The pubsub handler is constructed using the same
<a class="reference internal" href="../../api/application.html#pulsar.apps.Backend.connection_string" title="pulsar.apps.Backend.connection_string"><tt class="xref py py-attr docutils literal"><span class="pre">pulsar.apps.Backend.connection_string</span></tt></a> and
<a class="reference internal" href="../../api/application.html#pulsar.apps.Backend.name" title="pulsar.apps.Backend.name"><tt class="xref py py-attr docutils literal"><span class="pre">pulsar.apps.Backend.name</span></tt></a> as the the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="task">
<span id="apps-taskqueue-task"></span><h3>Task<a class="headerlink" href="#task" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.Task">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">Task</tt><big>(</big><em>id</em>, <em>overlap_id=''</em>, <em>name=None</em>, <em>time_executed=None</em>, <em>expiry=None</em>, <em>args=None</em>, <em>kwargs=None</em>, <em>status=None</em>, <em>from_task=None</em>, <em>result=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for tasks which are produced by
<a class="reference internal" href="jobs.html#apps-taskqueue-job"><em>jobs or periodic jobs</em></a>.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.id">
<tt class="descname">id</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.id" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> unique id.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.name">
<tt class="descname">name</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.name" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> name.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.status">
<tt class="descname">status</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#task-state"><em>status string</em></a> of task.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_executed">
<tt class="descname">time_executed</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_executed" title="Permalink to this definition">¶</a></dt>
<dd><p>date time when the task was executed.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_start">
<tt class="descname">time_start</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_start" title="Permalink to this definition">¶</a></dt>
<dd><p>date-time when the task calculation has started.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.time_end">
<tt class="descname">time_end</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.time_end" title="Permalink to this definition">¶</a></dt>
<dd><p>date-time when the task has finished.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.expiry">
<tt class="descname">expiry</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.expiry" title="Permalink to this definition">¶</a></dt>
<dd><p>optional date-time indicating when the task should expire.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.timeout">
<tt class="descname">timeout</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>A datetime or <tt class="docutils literal"><span class="pre">None</span></tt> indicating whether a timeout has occurred.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.from_task">
<tt class="descname">from_task</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.from_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> for the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> which queued
this <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>. This is a usuful for monitoring the creation
of tasks within other tasks.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.Task.status_code">
<tt class="descname">status_code</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.status_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer indicating <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.status" title="pulsar.apps.tasks.backends.Task.status"><tt class="xref py py-attr docutils literal"><span class="pre">status</span></tt></a> precedence.
Lower number higher precedence.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.done">
<tt class="descname">done</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.done"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> has finshed
(its status is one of <a class="reference internal" href="#task-state"><em>READY_STATES</em></a>).</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.duration">
<tt class="descname">duration</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.duration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> duration. Only available if the task status is in
<tt class="xref py py-attr docutils literal"><span class="pre">FULL_RUN_STATES</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.Task.tojson">
<tt class="descname">tojson</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#Task.tojson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.Task.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the task instance into a JSON-serializable dictionary.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="taskbackend">
<h3>TaskBackend<a class="headerlink" href="#taskbackend" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.TaskBackend">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">TaskBackend</tt><big>(</big><em>scheme</em>, <em>connection_string</em>, <em>name=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../../api/application.html#pulsar.apps.Backend" title="pulsar.apps.Backend"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Backend</span></tt></a> class for <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>.
A <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> is responsible for creating tasks and put them
into the distributed queue.
It also schedules the run of periodic tasks if enabled to do so.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.task_paths">
<tt class="descname">task_paths</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.task_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of paths where to upload <a class="reference internal" href="intro.html#app-taskqueue-job"><em>jobs</em></a> which
are factory of tasks. Passed by the task-queue application
<a class="reference internal" href="../../settings.html#setting-task-paths"><em>task paths setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.schedule_periodic">
<tt class="descname">schedule_periodic</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.schedule_periodic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.schedule_periodic" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> can schedule periodic tasks. Passed
by the task-queue application
<a class="reference internal" href="../../settings.html#setting-schedule-periodic"><em>schedule-periodic setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.backlog">
<tt class="descname">backlog</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.backlog" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of concurrent tasks running on a task-queue
<tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Worker</span></tt>. A number in the order of 5 to 10 is normally
used. Passed by the task-queue application
<a class="reference internal" href="../../settings.html#setting-concurrent-tasks"><em>concurrent tasks setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.max_tasks">
<tt class="descname">max_tasks</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.max_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of tasks a worker will process before restarting.
Passed by the task-queue application
<a class="reference internal" href="../../settings.html#setting-max-requests"><em>max requests setting</em></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.poll_timeout">
<tt class="descname">poll_timeout</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.poll_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>The (asynchronous) timeout for polling tasks from the task queue. It is
always a positive number and it can be specified via the backend
connection string:</p>
<div class="highlight-python"><pre>local://?poll_timeout=3</pre>
</div>
<p>There shouldn&#8217;t be any reason to modify the default value.</p>
<p>Default: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.processed">
<tt class="descname">processed</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.processed" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of tasks processed (so far) by the worker running this backend.
This value is important in connection with the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.max_tasks" title="pulsar.apps.tasks.backends.TaskBackend.max_tasks"><tt class="xref py py-attr docutils literal"><span class="pre">max_tasks</span></tt></a> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.pubsub">
<tt class="descname">pubsub</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.pubsub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.pubsub" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../pubsub.html#pulsar.apps.pubsub.PubSub" title="pulsar.apps.pubsub.PubSub"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.pubsub.PubSub</span></tt></a> handler which notifies
and listen tasks execution status. There are three channels:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;name&gt;_task_created</span></tt> published when a new task is created.</li>
<li><tt class="docutils literal"><span class="pre">&lt;name&gt;_task_start</span></tt> published when the task queue starts executing a task.</li>
<li><tt class="docutils literal"><span class="pre">&lt;name&gt;_task_done</span></tt> published when a task is done.</li>
</ul>
<p>All three messages are composed by the task id only. Here <tt class="docutils literal"><span class="pre">&lt;name&gt;</span></tt> is
replaced by the <tt class="xref py py-attr docutils literal"><span class="pre">pulsar.Backend.name</span></tt> attribute of this task backend.</p>
<p>Check the <a class="reference internal" href="#tasks-pubsub"><em>task broadcasting documentation</em></a> for more
information.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.concurrent_tasks">
<tt class="descname">concurrent_tasks</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.concurrent_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.concurrent_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Concurrent set of task ids.</p>
<p>The task with id in this set are currentlty being executed
by the task queue worker running this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>..</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.num_concurrent_tasks">
<tt class="descname">num_concurrent_tasks</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.num_concurrent_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.num_concurrent_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.concurrent_tasks" title="pulsar.apps.tasks.backends.TaskBackend.concurrent_tasks"><tt class="xref py py-attr docutils literal"><span class="pre">concurrent_tasks</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskBackend.registry">
<tt class="descname">registry</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.registry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.registry" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="jobs.html#pulsar.apps.tasks.models.JobRegistry" title="pulsar.apps.tasks.models.JobRegistry"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.tasks.models.JobRegistry</span></tt></a> for this
backend.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.run">
<tt class="descname">run</tt><big>(</big><em>jobname</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.run" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.run_job" title="pulsar.apps.tasks.backends.TaskBackend.run_job"><tt class="xref py py-meth docutils literal"><span class="pre">run_job()</span></tt></a> without task meta parameters</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.run_job">
<tt class="descname">run_job</tt><big>(</big><em>jobname</em>, <em>targs=None</em>, <em>tkwargs=None</em>, <em>**meta_params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.run_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.run_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#apps-taskqueue-task"><em>task</em></a> which may or
may not be queued. This method returns a <a class="reference internal" href="../../api/async.html#pulsar.Deferred" title="pulsar.Deferred"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.Deferred</span></tt></a> which
results in the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> created.
If <tt class="docutils literal"><span class="pre">jobname</span></tt> is not a valid <a class="reference internal" href="jobs.html#pulsar.apps.tasks.models.Job.name" title="pulsar.apps.tasks.models.Job.name"><tt class="xref py py-attr docutils literal"><span class="pre">pulsar.apps.tasks.models.Job.name</span></tt></a>,
a <tt class="docutils literal"><span class="pre">TaskNotAvailable</span></tt> exception occurs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>jobname</strong> &#8211; the name of a <a class="reference internal" href="jobs.html#pulsar.apps.tasks.models.Job" title="pulsar.apps.tasks.models.Job"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.tasks.models.Job</span></tt></a>
registered with the <a class="reference internal" href="intro.html#pulsar.apps.tasks.TaskQueue" title="pulsar.apps.tasks.TaskQueue"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.tasks.TaskQueue</span></tt></a> application.</li>
<li><strong>targs</strong> &#8211; optional tuple used for the positional arguments in the
task callable.</li>
<li><strong>tkwargs</strong> &#8211; optional dictionary used for the key-valued arguments
in the task callable.</li>
<li><strong>meta_params</strong> &#8211; Additional parameters to be passed to the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>
constructor (not its callable function).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="../../api/async.html#pulsar.Deferred" title="pulsar.Deferred"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.Deferred</span></tt></a> resulting in a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a>
on success.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.wait_for_task">
<tt class="descname">wait_for_task</tt><big>(</big><em>task_id</em>, <em>timeout=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.wait_for_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.wait_for_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously wait for a task with <tt class="docutils literal"><span class="pre">task_id</span></tt> to have finished
its execution. It returns a <a class="reference internal" href="../../api/async.html#pulsar.Deferred" title="pulsar.Deferred"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.Deferred</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.start">
<tt class="descname">start</tt><big>(</big><em>worker</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.start" title="Permalink to this definition">¶</a></dt>
<dd><p>invoked by the task queue <tt class="docutils literal"><span class="pre">worker</span></tt> when it starts.</p>
<p>Here, the <tt class="docutils literal"><span class="pre">worker</span></tt> creates its thread pool via
<a class="reference internal" href="../../api/actor.html#pulsar.Actor.create_thread_pool" title="pulsar.Actor.create_thread_pool"><tt class="xref py py-meth docutils literal"><span class="pre">pulsar.Actor.create_thread_pool()</span></tt></a> and register the
<a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.may_pool_task" title="pulsar.apps.tasks.backends.TaskBackend.may_pool_task"><tt class="xref py py-meth docutils literal"><span class="pre">may_pool_task()</span></tt></a> callback in its event loop.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.close">
<tt class="descname">close</tt><big>(</big><em>worker</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close this <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>. Invoked by the
<tt class="xref py py-class docutils literal"><span class="pre">pulsar.apps.Worker</span></tt> when is stopping.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.put_task">
<tt class="descname">put_task</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.put_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.put_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Put the <tt class="docutils literal"><span class="pre">task_id</span></tt> into the queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>task_id</strong> &#8211; the task id.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">an <em class="xref std std-ref">asynchronous component</em> which results
in the <tt class="docutils literal"><span class="pre">task_id</span></tt> added.</td>
</tr>
</tbody>
</table>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.num_tasks">
<tt class="descname">num_tasks</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.num_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.num_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the number of tasks in the task queue.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.get_task">
<tt class="descname">get_task</tt><big>(</big><em>task_id=None</em>, <em>when_done=False</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.get_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.get_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from a <tt class="docutils literal"><span class="pre">task_id</span></tt>. Must be implemented
by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>task_id</strong> &#8211; the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> of the task to retrieve.</li>
<li><strong>when_done</strong> &#8211; if <tt class="docutils literal"><span class="pre">True</span></tt> return only when the task is in a ready state.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> or <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.get_tasks">
<tt class="descname">get_tasks</tt><big>(</big><em>**filters</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.get_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.get_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a group of <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from the backend.</p>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.save_task">
<tt class="descname">save_task</tt><big>(</big><em>task_id</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.save_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.save_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> with <tt class="docutils literal"><span class="pre">task_id</span></tt> and key-valued
parameters <tt class="docutils literal"><span class="pre">params</span></tt>.</p>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.delete_tasks">
<tt class="descname">delete_tasks</tt><big>(</big><em>task_ids=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.delete_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.delete_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a group of task. Must be implemented by subclasses.</p>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush task backend by removing all tasks and clearing the queue.</p>
<p><strong>Must be implemented by subclasses.</strong></p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.tick">
<tt class="descname">tick</tt><big>(</big><em>now=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.tick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.tick" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a tick, that is one iteration of the scheduler. This
method only works when <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.schedule_periodic" title="pulsar.apps.tasks.backends.TaskBackend.schedule_periodic"><tt class="xref py py-attr docutils literal"><span class="pre">schedule_periodic</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt> and
the arbiter context.</p>
<p>Executes all due tasks and calculate the time in seconds to wait before
running a new <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend.tick" title="pulsar.apps.tasks.backends.TaskBackend.tick"><tt class="xref py py-meth docutils literal"><span class="pre">tick()</span></tt></a>. For testing purposes a <tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt>
value <tt class="docutils literal"><span class="pre">now</span></tt> can be passed.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.create_task">
<tt class="descname">create_task</tt><big>(</big><em>jobname</em>, <em>targs=None</em>, <em>tkwargs=None</em>, <em>expiry=None</em>, <em>**params</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.create_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.create_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> from <tt class="docutils literal"><span class="pre">jobname</span></tt>, positional arguments
<tt class="docutils literal"><span class="pre">targs</span></tt>, key-valued arguments <tt class="docutils literal"><span class="pre">tkwargs</span></tt> and <a class="reference internal" href="#pulsar.apps.tasks.backends.Task" title="pulsar.apps.tasks.backends.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> meta parameters
<tt class="docutils literal"><span class="pre">params</span></tt>. This method can be called by any process domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>jobname</strong> &#8211; the name of the <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> which create the task.</li>
<li><strong>targs</strong> &#8211; task positional arguments (a <tt class="docutils literal"><span class="pre">tuple</span></tt> or <tt class="docutils literal"><span class="pre">None</span></tt>).</li>
<li><strong>tkwargs</strong> &#8211; task key-valued arguments (a <tt class="docutils literal"><span class="pre">dict</span></tt> or <tt class="docutils literal"><span class="pre">None</span></tt>).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="../../tutorials/coroutine.html#coroutine"><em>coroutine</em></a> resulting in a <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a>
or <tt class="docutils literal"><span class="pre">None</span></tt> if no task was created.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.may_pool_task">
<tt class="descname">may_pool_task</tt><big>(</big><em>worker</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.may_pool_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.may_pool_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Called in the <tt class="docutils literal"><span class="pre">worker</span></tt> event loop.</p>
<p>It pools a new task if possible, and add it to the queue of
tasks consumed by the <tt class="docutils literal"><span class="pre">worker</span></tt> CPU-bound thread.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.TaskBackend.task_done_callback">
<tt class="descname">task_done_callback</tt><big>(</big><em>task_id</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskBackend.task_done_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskBackend.task_done_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Got a task_id from the <tt class="docutils literal"><span class="pre">&lt;name&gt;_task_done</span></tt> channel.</p>
<p>Check if a <tt class="docutils literal"><span class="pre">callback</span></tt> is available in the <tt class="xref py py-attr docutils literal"><span class="pre">callbacks</span></tt> dictionary. If
so fire the callback with the <tt class="docutils literal"><span class="pre">task</span></tt> instance corresponsding to the input
<tt class="docutils literal"><span class="pre">task_id</span></tt>.</p>
<p>If a callback is not available, it must have been fired already.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="taskconsumer">
<h3>TaskConsumer<a class="headerlink" href="#taskconsumer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.TaskConsumer">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">TaskConsumer</tt><big>(</big><em>backend</em>, <em>worker</em>, <em>task_id</em>, <em>job</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#TaskConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for consuming tasks.</p>
<p>Instances of this consumer are created by the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a> when
a task is executed.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskConsumer.task_id">
<tt class="descname">task_id</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskConsumer.task_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#pulsar.apps.tasks.backends.Task.id" title="pulsar.apps.tasks.backends.Task.id"><tt class="xref py py-attr docutils literal"><span class="pre">Task.id</span></tt></a> being consumed.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskConsumer.job">
<tt class="descname">job</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskConsumer.job" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="jobs.html#apps-taskqueue-job"><em>Job</em></a> which generated the <tt class="xref py py-attr docutils literal"><span class="pre">task</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskConsumer.worker">
<tt class="descname">worker</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskConsumer.worker" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="../../api/actor.html#pulsar.Actor" title="pulsar.Actor"><tt class="xref py py-class docutils literal"><span class="pre">pulsar.Actor</span></tt></a> running the task worker.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.TaskConsumer.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#pulsar.apps.tasks.backends.TaskConsumer.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to the <a class="reference internal" href="#pulsar.apps.tasks.backends.TaskBackend" title="pulsar.apps.tasks.backends.TaskBackend"><tt class="xref py py-class docutils literal"><span class="pre">TaskBackend</span></tt></a>. This is useful when creating
tasks from within a <a class="reference internal" href="jobs.html#job-callable"><em>job callable</em></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="scheduler-entry">
<h3>Scheduler Entry<a class="headerlink" href="#scheduler-entry" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry">
<em class="property">class </em><tt class="descclassname">pulsar.apps.tasks.backends.</tt><tt class="descname">SchedulerEntry</tt><big>(</big><em>name</em>, <em>schedule</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>last_run_at=None</em>, <em>total_run_count=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>A class used as a schedule entry in by a <tt class="xref py py-class docutils literal"><span class="pre">Scheduler</span></tt>.</p>
<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.name">
<tt class="descname">name</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Task name</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.schedule">
<tt class="descname">schedule</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>The schedule</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.last_run_at">
<tt class="descname">last_run_at</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.last_run_at" title="Permalink to this definition">¶</a></dt>
<dd><p>The time and date of when this task was last run.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.total_run_count">
<tt class="descname">total_run_count</tt><em class="property"> = None</em><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.total_run_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of times this periodic task has been executed by the
<tt class="xref py py-class docutils literal"><span class="pre">Scheduler</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.scheduled_last_run_at">
<tt class="descname">scheduled_last_run_at</tt><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry.scheduled_last_run_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.scheduled_last_run_at" title="Permalink to this definition">¶</a></dt>
<dd><p>The scheduled last run datetime. This is different from
<a class="reference internal" href="#pulsar.apps.tasks.backends.SchedulerEntry.last_run_at" title="pulsar.apps.tasks.backends.SchedulerEntry.last_run_at"><tt class="xref py py-attr docutils literal"><span class="pre">last_run_at</span></tt></a> only when <tt class="xref py py-attr docutils literal"><span class="pre">anchor</span></tt> is set.</p>
</dd></dl>

<dl class="method">
<dt id="pulsar.apps.tasks.backends.SchedulerEntry.next">
<tt class="descname">next</tt><big>(</big><em>now=None</em><big>)</big><a class="reference internal" href="../../modules/pulsar/apps/tasks/backends.html#SchedulerEntry.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pulsar.apps.tasks.backends.SchedulerEntry.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new instance of the same class, but with
its date and count fields updated. Function called by
<tt class="xref py py-class docutils literal"><span class="pre">Backend</span></tt> when the <tt class="docutils literal"><span class="pre">this</span></tt> is due to run.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-pulsar.apps.tasks.backends.local">
<span id="local-backend"></span><h2>Local Backend<a class="headerlink" href="#module-pulsar.apps.tasks.backends.local" title="Permalink to this headline">¶</a></h2>
<p>The local task backend store tasks in pulsar process domain and therefore
is accessed only from one running task queue.</p>
</div>
<div class="section" id="redis-backend">
<h2>Redis Backend<a class="headerlink" href="#redis-backend" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../../index.html">
  <img class="logo" width="200" src="../../static/pulsar.png" alt="pulsar" title="Pulsar"/>
</a>
</p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Task Backend</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#task-states">Task states</a></li>
<li><a class="reference internal" href="#task-status-broadcasting">Task status broadcasting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#task">Task</a></li>
<li><a class="reference internal" href="#taskbackend">TaskBackend</a></li>
<li><a class="reference internal" href="#taskconsumer">TaskConsumer</a></li>
<li><a class="reference internal" href="#scheduler-entry">Scheduler Entry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-pulsar.apps.tasks.backends.local">Local Backend</a></li>
<li><a class="reference internal" href="#redis-backend">Redis Backend</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="jobs.html"
                        title="previous chapter">Jobs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rpc.html"
                        title="next chapter">RPC</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../sources/apps/tasks/backend.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
        &copy; Copyright 2011-2013, Luca Sbardella.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-3900561-8']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>